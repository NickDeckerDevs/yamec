!function e(t,n,o){function i(s,l){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({"./src/js/editor.js":[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},o=function(e){return e&&(e["default"]||e)},i=o(e("./helpers")),r=o(e("./selection")),s=o(e("./editor-toolbar")),l=function(){function e(t){return"string"==typeof t&&(t=document.querySelectorAll(t)),i.isElement(t)?(this.dom=t,this.dom.setAttribute("contentEditable",!0),this.selection=new r,this.commands={},this.events={},void this.initToolbar().addEvents()):i.slice.call(t).map(function(t){return new e(t)})}return n(e,null,{getContext:{value:function(){for(var e=this.selection.range.commonAncestorContainer;1!==e.nodeType;)e=e.parentNode;return e},writable:!0,enumerable:!0,configurable:!0},registerCommand:{value:function(e){if("string"==typeof e){var t=e,n=arguments[1];(e={})[t]=n}for(var o,r=i.keys(e)[Symbol.iterator]();!(o=r.next()).done;){var t=o.value;this.commands[t]=this.commands[t]||[],this.commands[t].push(e[t])}},writable:!0,enumerable:!0,configurable:!0},unregisterCommand:{value:function(e,t){var n,o;(n=this.commands[e])&&(void 0===t?delete this.commands[e]:-1!==(o=n.indexOf(t))&&(n.splice(o,1),0===n.length&&delete this.commands[e]))},writable:!0,enumerable:!0,configurable:!0},execCommand:{value:function(e,t,n){var o=this;this.selection.restore(),i.defer(function(){if(o.commands[e])for(var i,r=o.commands[e][Symbol.iterator]();!(i=r.next()).done;){var s=i.value;s.apply(o,[t,e])}else document.execCommand(e,!1,t);n?(o.selection.collapseToEnd(),o.toolbar.hide()):o.showToolbar()})},writable:!0,enumerable:!0,configurable:!0},on:{value:function(e,t){e=e.split(" ");for(var n,o=e[Symbol.iterator]();!(n=o.next()).done;){var i=n.value;this.events[i]=this.events[i]||[],this.events[i].push(t)}return this},writable:!0,enumerable:!0,configurable:!0},off:{value:function(e,t){var n,o;e=e.split(" ");for(var i,r=e[Symbol.iterator]();!(i=r.next()).done;){var s=i.value;(n=this.events[s])&&(void 0===t?delete this.events[s]:-1!==(o=n.indexOf(t))&&(n.splice(o,1),0===n.length&&delete this.events[s]))}return this},writable:!0,enumerable:!0,configurable:!0},trigger:{value:function(e){var t;if(t=this.events[e])for(var n,o=t[Symbol.iterator]();!(n=o.next()).done;){var r=n.value;r.apply(this,i.slice(arguments,1))}return this},writable:!0,enumerable:!0,configurable:!0},addEvents:{value:function(){for(var e,t=this,n=function(e){t.trigger(e.type,e)},o=["mouseup","mousedown","click","mouseover","mouseout","keyup","keydown","keypress","focus","blur"],i=o[Symbol.iterator]();!(e=i.next()).done;){var r=e.value;this.dom.addEventListener(r,n)}return this.on("mouseup keyup",this.showToolbar),this},writable:!0,enumerable:!0,configurable:!0},initToolbar:{value:function(){var e=this;this.registerCommand({toggleLink:function(){var e,t=this;(e=this.selection.isWithin("a"))?(e.forEach(i.unwrap),this.selection.restore()):this.selection.contains("a")?this.execCommand("unlink"):this.toolbar.toggleInput("http://...",function(e){t.execCommand("createLink",e,!!e)})},toggleBlock:function(e){this.selection.isWithin(e)?this.execCommand("formatBlock","p"):this.execCommand("formatBlock",e)},toggleTag:function(e){var t;if(t=this.selection.isWithin(e))t.forEach(i.unwrap),this.selection.restore();else if(this.selection.contains(e)){var n=new RegExp("<"+e+"(.*?)>|</"+e+">","g");this.selection.replace(this.selection.html.replace(n,""))}else this.selection.replace("<"+e+">"+this.selection.html+"</"+e+">")}});var t=function(t,n){return function(){return e.execCommand(t,n)}},n=function(t){return function(){return"boolean"==typeof t?t:/^(a|code)$/.test(t)?e.selection.contains(t)||e.selection.isWithin(t):/^(h(2|3)|blockquote)$/.test(t)?e.selection.isWithin(t):document.queryCommandState(t)}};return this.toolbar=new s({onInputCancel:function(){e.selection.restore()},buttons:[{content:"B",action:t("bold"),active:n("bold")},{content:"I",action:t("italic"),active:n("italic")},{content:"A",action:t("toggleLink"),active:n("a")},{content:"H1",action:t("toggleBlock","h2"),active:n("h2")},{content:"H2",action:t("toggleBlock","h3"),active:n("h3")},{content:'"',action:t("toggleBlock","blockquote"),active:n("blockquote")},{content:"&lt;/&gt;",action:t("toggleTag","code"),active:n("code")}]}),this},writable:!0,enumerable:!0,configurable:!0},showToolbar:{value:function(){var e,t,n,o={};return this.selection.save(),this.selection.isCollapsed?void this.toolbar.hide():(e=this.selection.getRangeBoundary(),o.x=(e.left+e.right)/2,o.y=window.pageYOffset,this.toolbar.dom.style.display="block",t=this.toolbar.dom.offsetHeight,n=this.toolbar.dom.offsetWidth/2,this.toolbar.dom.style.display="",e.top<t?(this.toolbar.position("bottom"),o.y+=e.bottom):(this.toolbar.position("top"),o.y+=e.top),o.x<n?o.x+=n-o.x:window.innerWidth-i.scrollbarWidth()-o.x<n&&(o.x-=n-(window.innerWidth-o.x-i.scrollbarWidth())),void this.toolbar.show(o.x,o.y))},writable:!0,enumerable:!0,configurable:!0}}),e}();window.Editor=l,t.exports=l},{"./editor-toolbar":"/Users/wilwilsman/Documents/Projects/Editor/src/js/editor-toolbar.js","./helpers":"/Users/wilwilsman/Documents/Projects/Editor/src/js/helpers.js","./selection":"/Users/wilwilsman/Documents/Projects/Editor/src/js/selection.js"}],"/Users/wilwilsman/Documents/Projects/Editor/src/js/editor-toolbar.js":[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},o=function(e){return e&&(e["default"]||e)},i=o(e("./helpers")),r=/(?:^|\s)(pm--(top|bottom|left|right))(?:\s|$)/,s=function(){function e(){var e=void 0===arguments[0]?{}:arguments[0];this.buttons=e.buttons||{},document.body.appendChild(this.build()),this.position(e.position||"top"),this.cancelInput=e.onInputCancel||i.noop,this.hide()}return n(e,null,{show:{value:function(e,t){var n=this;return this.dom.style.display="",this.dom.style.top=t+"px",this.dom.style.left=e+"px",i.defer(function(){return n.dom.classList.add("pm--show")}),this.buttons.forEach(function(e){return e.toggle()}),this},writable:!0,enumerable:!0,configurable:!0},hide:{value:function(){return this.dom.style.display="none",this.dom.style.top=this.dom.style.left="",this.dom.classList.remove("pm--show"),this.toggleInput(!1),this},writable:!0,enumerable:!0,configurable:!0},visible:{get:function(){return this.dom.classList.contains("pm--show")},enumerable:!0,configurable:!0},toggleInput:{value:function(e,t,n,o){var r=this,s=this.dom.firstChild.lastChild,l="block"===s.style.display,a=arguments[arguments.length-1];if(o="boolean"==typeof a?a:void 0,n="function"==typeof t?t:n,n="function"==typeof n?n:void 0,e="string"==typeof e?e:"",t="string"==typeof t?t:"",/left|right/.test(this.position())&&(o=!1),l=void 0===o?l:!o,s.firstChild.setAttribute("placeholder",e),s.firstChild.value=t,l)s.style.display="",s.firstChild.value="",this.inputCallback=i.noop,this.dom.style.width="",this.dom.classList.remove("pm--input");else{this.inputCallback=n||i.noop,this.dom.style.width=this.dom.offsetWidth+"px",s.style.display="block";var c=this.dom.offsetWidth<s.offsetWidth;this.dom.style.width=c?s.offsetWidth+"px":"",i.defer(function(){return r.dom.classList.add("pm--input")})}},writable:!0,enumerable:!0,configurable:!0},position:{value:function(e){var t=r.exec(this.dom.className);return void 0===e?t[2]||null:/top|bottom|left|right/.test(e)?(t&&this.dom.classList.remove(t[1]),this.dom.classList.add("pm--"+e),/left|right/.test(e)&&this.toggleInput(!1),this):!1},writable:!0,enumerable:!0,configurable:!0},build:{value:function(){var e=this,t=document.createElement("div");t.className="pm",t.appendChild(document.createElement("ul")),this.buttons.forEach(function(n,o,i){var r=document.createElement("button");r.setAttribute("type","button"),r.className="pm__btn",0===o?r.classList.add("pm__btn--first"):o===i.length-1&&r.classList.add("pm__btn--last"),r.classList.add(n.className),r.innerHTML=n.content,r.addEventListener("click",n.action.bind(e)),n.element=t.firstChild.appendChild(document.createElement("li")).appendChild(r),n.toggle=function(){r.classList.toggle("active",n.active())}});var n=t.firstChild.appendChild(document.createElement("li")).appendChild(document.createElement("input"));return n.className="pm__control",this.inputCallback=i.noop,n.addEventListener("keyup",function(t){13===(t.which||t.keyCode)&&(e.inputCallback(n.value),e.toggleInput(!1))}),n.parentNode.addEventListener("transitionend",function(){return n.focus()}),n.parentNode.appendChild(document.createElement("div")).className="pm__cancel",n.nextElementSibling.addEventListener("click",function(){e.toggleInput(!1),e.cancelInput()}),this.dom=t},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=s},{"./helpers":"/Users/wilwilsman/Documents/Projects/Editor/src/js/helpers.js"}],"/Users/wilwilsman/Documents/Projects/Editor/src/js/helpers.js":[function(e,t){"use strict";var n,o={slice:Array.prototype.slice,keys:Object.keys,isElement:function(e){return!(!e||1!==e.nodeType)},toHTML:function(e){var t,n=document.createElement("div");e=e.length?o.slice.call(e):[e];for(var i,r=e[Symbol.iterator]();!(i=r.next()).done;){var s=i.value;n.appendChild(s)}return t=n.innerHTML,n=null,t},unwrap:function(e){for(var t,n=e.parentNode,o=document.createDocumentFragment();t=e.firstChild;)o.appendChild(t);return n.insertBefore(o,e),n.removeChild(e),o},closest:function(e,t){for(var n;n=e.parentNode;)if(n===t)return n},getTextNodes:function(e){var t=[];if(3===e.nodeType)t.push(e);else for(var n,i=o.slice.call(e.childNodes),r=i[Symbol.iterator]();!(n=r.next()).done;){var s=n.value;t.push.apply(t,o.getTextNodes(s))}return t},scrollbarWidth:function(){if(n)return n;var e,t,o=document.createElement("div"),i=o.cloneNode();return o.style.visibility="hidden",o.style.width="100px",document.body.appendChild(o),e=o.offsetWidth,o.style.overflow="scroll",i.style.width="100%",o.appendChild(i),t=i.offsetWidth,o.parentNode.removeChild(o),n=e-t},noop:function(){},now:Date.now,delay:function(e,t){var n=o.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},defer:function(e){return o.delay.apply(o,[e,1].concat(o.slice.call(arguments,1)))}};t.exports=o},{}],"/Users/wilwilsman/Documents/Projects/Editor/src/js/selection.js":[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},o=function(e){return e&&(e["default"]||e)},i=o(e("./helpers")),r=function(){function e(){return this.constructor.instance?this.constructor.instance:void(this.constructor.instance=this)}return n(e,null,{get:{value:function(){return window.getSelection()},writable:!0,enumerable:!0,configurable:!0},save:{value:function(){var e=[],t=this.range;e[0]=t.commonAncestorContainer,e[2]=this.getCaretOffset(e[0]),e[1]=e[2]-t.toString().length,this.saved=e},writable:!0,enumerable:!0,configurable:!0},restore:{value:function(){this.select.apply(this,this.saved)},writable:!0,enumerable:!0,configurable:!0},getRangeBoundary:{value:function(){return this.range.getBoundingClientRect()},writable:!0,enumerable:!0,configurable:!0},collapseToEnd:{value:function(){this.get().collapseToEnd()},writable:!0,enumerable:!0,configurable:!0},select:{value:function(e,t,n){var o=this.get(),r=document.createRange();if(r.selectNode(e),void 0!==t&&void 0!==n)for(var s,l=i.getTextNodes(e),a=!1,c=0,u=void 0,d=l[Symbol.iterator]();!(s=d.next()).done;){var h=s.value;if(u=c+h.length,!a&&t>=c&&(u>t||t===u)&&(r.setStart(h,t-c),a=!0),a&&u>=n){r.setEnd(h,n-c);break}c=u}o.removeAllRanges(),o.addRange(r)},writable:!0,enumerable:!0,configurable:!0},replace:{value:function(e){var t,n,o=this.get(),i=this.range,r=i.cloneRange(),s=document.createElement("div"),l=document.createDocumentFragment();for(s.innerHTML=e;t=s.firstChild;)n=l.appendChild(t);i.deleteContents(),i.insertNode(l),n&&(r.setEndAfter(n),o.removeAllRanges(),o.addRange(r))},writable:!0,enumerable:!0,configurable:!0},getCaretOffset:{value:function(e){var t=this.range,n=t.cloneRange();return n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),n.toString().length},writable:!0,enumerable:!0,configurable:!0},contains:{value:function(e){var t=new RegExp("<"+e+"(.*?)>|</"+e+">");return t.test(this.html)},writable:!0,enumerable:!0,configurable:!0},isWithin:{value:function(e,t){var n=[],o=this.range,i=o.startContainer.parentNode,r=o.endContainer.parentNode,s=o.commonAncestorContainer;if(e=e.toUpperCase(),i.tagName===e&&n.push(i),r!==i&&r.tagName===e&&n.push(r),n.length>0)return n;for(t=void 0===t?document.body:t;s&&s!==t;){if(s.tagName&&s.tagName===e)return n.push(s),n;s=s.parentNode}return!1},writable:!0,enumerable:!0,configurable:!0},html:{get:function(){return i.toHTML(this.range.cloneContents())},enumerable:!0,configurable:!0},isCollapsed:{get:function(){return this.get().isCollapsed},enumerable:!0,configurable:!0},range:{get:function(){return this.get().getRangeAt(0)},enumerable:!0,configurable:!0}}),e}();t.exports=r},{"./helpers":"/Users/wilwilsman/Documents/Projects/Editor/src/js/helpers.js"}]},{},["./src/js/editor.js"]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJlZGl0b3IuanMiLCJzcmMvanMvZWRpdG9yLmpzIiwic3JjL2pzL2VkaXRvci10b29sYmFyLmpzIiwic3JjL2pzL2hlbHBlcnMuanMiLCJzcmMvanMvc2VsZWN0aW9uLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiLi9zcmMvanMvZWRpdG9yLmpzIiwibW9kdWxlIiwiX3Byb3RvdHlwZVByb3BlcnRpZXMiLCJjaGlsZCIsInN0YXRpY1Byb3BzIiwiaW5zdGFuY2VQcm9wcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnRpZXMiLCJwcm90b3R5cGUiLCJfaW50ZXJvcFJlcXVpcmUiLCJvYmoiLCJfIiwiU2VsZWN0aW9uIiwiRWRpdG9yVG9vbGJhciIsIkVkaXRvciIsImVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXNFbGVtZW50IiwidGhpcyIsImRvbSIsInNldEF0dHJpYnV0ZSIsInNlbGVjdGlvbiIsImNvbW1hbmRzIiwiZXZlbnRzIiwiaW5pdFRvb2xiYXIiLCJhZGRFdmVudHMiLCJzbGljZSIsIm1hcCIsImdldENvbnRleHQiLCJ2YWx1ZSIsImN0eEVsZW1lbnQiLCJyYW5nZSIsImNvbW1vbkFuY2VzdG9yQ29udGFpbmVyIiwibm9kZVR5cGUiLCJwYXJlbnROb2RlIiwid3JpdGFibGUiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwicmVnaXN0ZXJDb21tYW5kIiwiY21kcyIsImNtZCIsImZ1bmMiLCJhcmd1bWVudHMiLCJfc3RlcCIsIl9pdGVyYXRvciIsImtleXMiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwicHVzaCIsInVucmVnaXN0ZXJDb21tYW5kIiwiaW5kZXgiLCJ1bmRlZmluZWQiLCJpbmRleE9mIiwic3BsaWNlIiwiZXhlY0NvbW1hbmQiLCJjb2xsYXBzZSIsIl90aGlzIiwicmVzdG9yZSIsImRlZmVyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImFwcGx5IiwiY29sbGFwc2VUb0VuZCIsInRvb2xiYXIiLCJoaWRlIiwic2hvd1Rvb2xiYXIiLCJvbiIsIm5hbWVzIiwic3BsaXQiLCJfc3RlcDMiLCJfaXRlcmF0b3IzIiwibmFtZSIsIm9mZiIsImZ1bmNzIiwiX3N0ZXA0IiwiX2l0ZXJhdG9yNCIsInRyaWdnZXIiLCJfc3RlcDUiLCJfaXRlcmF0b3I1IiwiX3N0ZXA2IiwiX3RoaXMyIiwiZmlyZUV2ZW50IiwiZXZlbnQiLCJ0eXBlIiwiZG9tRXZlbnRzIiwiX2l0ZXJhdG9yNiIsImV2dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdGhpczMiLCJ0b2dnbGVMaW5rIiwiZWxzIiwiX3RoaXM0IiwiaXNXaXRoaW4iLCJmb3JFYWNoIiwidW53cmFwIiwiY29udGFpbnMiLCJ0b2dnbGVJbnB1dCIsInRvZ2dsZUJsb2NrIiwidGFnTmFtZSIsInRvZ2dsZVRhZyIsInJlZyIsIlJlZ0V4cCIsInJlcGxhY2UiLCJodG1sIiwiY29tbWFuZFdyYXBwZXIiLCJxdWVyeVdyYXBwZXIiLCJxdWVyeSIsInRlc3QiLCJxdWVyeUNvbW1hbmRTdGF0ZSIsIm9uSW5wdXRDYW5jZWwiLCJidXR0b25zIiwiY29udGVudCIsImFjdGlvbiIsImFjdGl2ZSIsImJvdW5kYXJ5IiwidG9vbGJhckhlaWdodCIsInRvb2xiYXJIYWxmV2lkdGgiLCJwb2ludCIsInNhdmUiLCJpc0NvbGxhcHNlZCIsImdldFJhbmdlQm91bmRhcnkiLCJ4IiwibGVmdCIsInJpZ2h0IiwieSIsIndpbmRvdyIsInBhZ2VZT2Zmc2V0Iiwic3R5bGUiLCJkaXNwbGF5Iiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJ0b3AiLCJwb3NpdGlvbiIsImJvdHRvbSIsImlubmVyV2lkdGgiLCJzY3JvbGxiYXJXaWR0aCIsInNob3ciLCIuL2VkaXRvci10b29sYmFyIiwiLi9oZWxwZXJzIiwiLi9zZWxlY3Rpb24iLCIvVXNlcnMvd2lsd2lsc21hbi9Eb2N1bWVudHMvUHJvamVjdHMvRWRpdG9yL3NyYy9qcy9lZGl0b3ItdG9vbGJhci5qcyIsIkRJUlJFRyIsIm9wdHMiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJidWlsZCIsImNhbmNlbElucHV0Iiwibm9vcCIsImNsYXNzTGlzdCIsImFkZCIsImJ0biIsInRvZ2dsZSIsInJlbW92ZSIsInZpc2libGUiLCJnZXQiLCJwbGFjZWhvbGRlciIsImNhbGxiYWNrIiwiZm9yY2UiLCJjdHJsIiwiZmlyc3RDaGlsZCIsImxhc3RDaGlsZCIsImxhc3RBcmciLCJpbnB1dENhbGxiYWNrIiwid2lkdGgiLCJiaWdnZXJJbnB1dCIsImRpciIsIm9sZGRpciIsImV4ZWMiLCJjbGFzc05hbWUiLCJjcmVhdGVFbGVtZW50IiwiYnRucyIsImVsZW1lbnQiLCJpbm5lckhUTUwiLCJiaW5kIiwiaW5wdXQiLCJ3aGljaCIsImtleUNvZGUiLCJmb2N1cyIsIm5leHRFbGVtZW50U2libGluZyIsIi9Vc2Vycy93aWx3aWxzbWFuL0RvY3VtZW50cy9Qcm9qZWN0cy9FZGl0b3Ivc3JjL2pzL2hlbHBlcnMuanMiLCJBcnJheSIsInRvSFRNTCIsInRlbXAiLCJub2RlIiwicGFyZW50IiwiZnJhZyIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpbnNlcnRCZWZvcmUiLCJyZW1vdmVDaGlsZCIsImNsb3Nlc3QiLCJnZXRUZXh0Tm9kZXMiLCJub2RlcyIsImNoaWxkcmVuIiwiY2hpbGROb2RlcyIsIndpZHRoTm9TY3JvbGwiLCJ3aWR0aFdpdGhTY3JvbGwiLCJvdXRlciIsImlubmVyIiwiY2xvbmVOb2RlIiwidmlzaWJpbGl0eSIsIm92ZXJmbG93Iiwibm93IiwiRGF0ZSIsImRlbGF5IiwiZm4iLCJ3YWl0IiwiYXJncyIsInNldFRpbWVvdXQiLCJjb25jYXQiLCIvVXNlcnMvd2lsd2lsc21hbi9Eb2N1bWVudHMvUHJvamVjdHMvRWRpdG9yL3NyYy9qcy9zZWxlY3Rpb24uanMiLCJjb25zdHJ1Y3RvciIsImluc3RhbmNlIiwiZ2V0U2VsZWN0aW9uIiwic2F2ZWQiLCJnZXRDYXJldE9mZnNldCIsInRvU3RyaW5nIiwic2VsZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwic3RhcnQiLCJlbmQiLCJjcmVhdGVSYW5nZSIsInNlbGVjdE5vZGUiLCJ0ZXh0Tm9kZXMiLCJmb3VuZFN0YXJ0IiwiY2hhckNvdW50IiwiZW5kQ2hhckNvdW50IiwidGV4dE5vZGUiLCJzZXRTdGFydCIsInNldEVuZCIsInJlbW92ZUFsbFJhbmdlcyIsImFkZFJhbmdlIiwibGFzdE5vZGUiLCJleHBhbmRlZFJhbmdlIiwiY2xvbmVSYW5nZSIsImRlbGV0ZUNvbnRlbnRzIiwiaW5zZXJ0Tm9kZSIsInNldEVuZEFmdGVyIiwicHJlQ2FyZXRSYW5nZSIsInNlbGVjdE5vZGVDb250ZW50cyIsImVuZENvbnRhaW5lciIsImVuZE9mZnNldCIsInRhZ1JlZyIsImxpbWl0Tm9kZSIsInJldCIsInN0YXJ0UGFyZW50Iiwic3RhcnRDb250YWluZXIiLCJlbmRQYXJlbnQiLCJ0b1VwcGVyQ2FzZSIsImNsb25lQ29udGVudHMiLCJnZXRSYW5nZUF0Il0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQUEsSUFBQUosRUFBQUcsR0FBQSxDQUFBLElBQUFKLEVBQUFJLEdBQUEsQ0FBQSxHQUFBRSxHQUFBLGtCQUFBQyxVQUFBQSxPQUFBLEtBQUFGLEdBQUFDLEVBQUEsTUFBQUEsR0FBQUYsR0FBQSxFQUFBLElBQUFJLEVBQUEsTUFBQUEsR0FBQUosR0FBQSxFQUFBLElBQUFLLEdBQUEsR0FBQUMsT0FBQSx1QkFBQU4sRUFBQSxJQUFBLE1BQUFLLEdBQUFFLEtBQUEsbUJBQUFGLEVBQUEsR0FBQUcsR0FBQVgsRUFBQUcsSUFBQVMsV0FBQWIsR0FBQUksR0FBQSxHQUFBVSxL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RixhSm0zQkFtQyxJSW4zQlcsV0FDYixNQUFPMUksTUFBSzBJLE1BQU1uQyxhSnEzQmhCckYsWUFBWSxFQUNaQyxjQUFjLEdJbjNCZE4sT0pzM0JBNkgsSUl0M0JLLFdBQ1AsTUFBTzFJLE1BQUswSSxNQUFNK0YsV0FBVyxJSnczQjNCdk4sWUFBWSxFQUNaQyxjQUFjLEtJM2hDZDFCLElKa2lDTlgsR0FBT0osUUk1M0JRZSxJSjgzQlppSSxZQUFZLHVFQUF1RSIsImZpbGUiOiJlZGl0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsbnVsbCwiaW1wb3J0IF8gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCBTZWxlY3Rpb24gZnJvbSAnLi9zZWxlY3Rpb24nO1xuaW1wb3J0IEVkaXRvclRvb2xiYXIgZnJvbSAnLi9lZGl0b3ItdG9vbGJhcic7XG5cbmNsYXNzIEVkaXRvciB7XG4gIGNvbnN0cnVjdG9yKGVsKSB7XG4gICAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbCk7XG4gICAgfVxuXG4gICAgaWYgKCFfLmlzRWxlbWVudChlbCkpIHtcbiAgICAgIHJldHVybiBfLnNsaWNlLmNhbGwoZWwpLm1hcChlID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBFZGl0b3IoZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmRvbSA9IGVsO1xuICAgIHRoaXMuZG9tLnNldEF0dHJpYnV0ZSgnY29udGVudEVkaXRhYmxlJywgdHJ1ZSk7XG5cbiAgICB0aGlzLnNlbGVjdGlvbiA9IG5ldyBTZWxlY3Rpb24oKTtcbiAgICB0aGlzLmNvbW1hbmRzID0ge307XG4gICAgdGhpcy5ldmVudHMgPSB7fTtcblxuICAgIHRoaXMuaW5pdFRvb2xiYXIoKVxuICAgICAgICAuYWRkRXZlbnRzKCk7XG4gIH1cblxuICAvLyByZXR1cm5zIHRoZSBlbGVtZW50IHRoZSBjdXJzb3IgaXMgd2l0aGluXG4gIGdldENvbnRleHQoKSB7XG4gICAgdmFyIGN0eEVsZW1lbnQgPSB0aGlzLnNlbGVjdGlvbi5yYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtcblxuICAgIC8vIHdlIHdhbnQgdG8gcmV0dXJuIGFuIGVsZW1lbnRcbiAgICB3aGlsZSAoY3R4RWxlbWVudC5ub2RlVHlwZSAhPT0gMSkge1xuICAgICAgY3R4RWxlbWVudCA9IGN0eEVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3R4RWxlbWVudDtcbiAgfVxuXG4gIC8vIHJlZ2lzdGVycyBhIGNvbW1hbmQgKG9yIGNvbW1hbmRzKVxuICByZWdpc3RlckNvbW1hbmQoY21kcy8qLCBmdW5jKi8pIHtcblxuICAgIC8vIGlmIGBjbWRzYCBpcyBhIGEgc3RyaW5nLCB0dXJuIGFyZ3VtZW50cyBpbnRvIGFuIG9iamVjdFxuICAgIGlmICh0eXBlb2YgY21kcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGxldCBjbWQgPSBjbWRzLCBmdW5jID0gYXJndW1lbnRzWzFdO1xuICAgICAgKGNtZHMgPSB7fSlbY21kXSA9IGZ1bmM7XG4gICAgfVxuXG4gICAgLy8gYWRkIGNvbW1hbmRzXG4gICAgZm9yIChsZXQgY21kIG9mIF8ua2V5cyhjbWRzKSkge1xuICAgICAgdGhpcy5jb21tYW5kc1tjbWRdID0gdGhpcy5jb21tYW5kc1tjbWRdIHx8IFtdO1xuICAgICAgdGhpcy5jb21tYW5kc1tjbWRdLnB1c2goY21kc1tjbWRdKTtcbiAgICB9XG4gIH1cblxuICAvLyB1bnJlZ2lzdGVycyBhIGNvbW1hbmRcbiAgdW5yZWdpc3RlckNvbW1hbmQoY21kLCBmdW5jKSB7XG4gICAgdmFyIGNtZHMsIGluZGV4O1xuXG4gICAgaWYgKGNtZHMgPSB0aGlzLmNvbW1hbmRzW2NtZF0pIHtcblxuICAgICAgLy8gZGVsZXRlIGFsbCBpZiBgZnVuY2Agbm90IHBhc3NlZFxuICAgICAgaWYgKGZ1bmMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5jb21tYW5kc1tjbWRdO1xuXG4gICAgICAvLyBkZWxldGUgc3BlY2lmaWMgZnVuY3Rpb24gaWYgaXQgZXhpc3RzXG4gICAgICB9IGVsc2UgaWYgKChpbmRleCA9IGNtZHMuaW5kZXhPZihmdW5jKSkgIT09IC0xKSB7XG4gICAgICAgIGNtZHMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgICAgICAvLyByZW1vdmUgZnJvbSBgY29tbWFuZHNgIGlmIGVtcHR5XG4gICAgICAgIGlmIChjbWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmNvbW1hbmRzW2NtZF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBwcmVmb3JtcyB0aGUgY29tbWFuZCAoYGRvY3VtZW50LmV4ZWNDb21tYW5kYCBieSBkZWZhdWx0KVxuICBleGVjQ29tbWFuZChjbWQsIHZhbHVlLCBjb2xsYXBzZSkge1xuXG4gICAgLy8gcmVzdG9yZSBzZWxlY3Rpb24gZmlyc3QgKGluIGNhc2UgY29tbWFuZCByZXF1aXJlZCBpbnB1dClcbiAgICB0aGlzLnNlbGVjdGlvbi5yZXN0b3JlKCk7XG5cbiAgICAvLyBkZWZlciBjb21tYW5kIHRvIHdhaXQgZm9yIHNlbGVjdGlvbiB0byByZXN0b3JlXG4gICAgXy5kZWZlcigoKSA9PiB7XG5cbiAgICAgIC8vIGNhbGwgY3VzdG9tIGNvbW1hbmRzXG4gICAgICBpZiAodGhpcy5jb21tYW5kc1tjbWRdKSB7XG4gICAgICAgIGZvciAobGV0IGZ1bmMgb2YgdGhpcy5jb21tYW5kc1tjbWRdKSB7XG4gICAgICAgICAgZnVuYy5hcHBseSh0aGlzLCBbdmFsdWUsIGNtZF0pO1xuICAgICAgICB9XG5cbiAgICAgIC8vIGBkb2N1bWVudC5leGVjQ29tbWFuZGAgYnkgZGVmYXVsdFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoY21kLCBmYWxzZSwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBjb2xsYXBzZSBzZWxlY3Rpb24gYW5kIGhpZGUgdG9vbGJhclxuICAgICAgaWYgKGNvbGxhcHNlKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uLmNvbGxhcHNlVG9FbmQoKTtcbiAgICAgICAgdGhpcy50b29sYmFyLmhpZGUoKTtcblxuICAgICAgLy8gcmVwb3NpdGlvbiB0aGUgdG9vbGJhclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zaG93VG9vbGJhcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gYWRkIGV2ZW50IGxpc3RlbmVyc1xuICBvbihuYW1lcywgZnVuYykge1xuXG4gICAgLy8gc3BsaXQgbmFtZXMgaW50byBhbiBhcnJheVxuICAgIG5hbWVzID0gbmFtZXMuc3BsaXQoJyAnKTtcblxuICAgIC8vIGFkZCBldmVudHNcbiAgICBmb3IgKGxldCBuYW1lIG9mIG5hbWVzKSB7XG4gICAgICB0aGlzLmV2ZW50c1tuYW1lXSA9IHRoaXMuZXZlbnRzW25hbWVdIHx8IFtdO1xuICAgICAgdGhpcy5ldmVudHNbbmFtZV0ucHVzaChmdW5jKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHJlbW92ZSBldmVudCBsaXN0ZW5lcnNcbiAgb2ZmKG5hbWVzLCBmdW5jKSB7XG4gICAgdmFyIGZ1bmNzLCBpbmRleDtcblxuICAgIC8vIHNwbGl0IG5hbWVzIGludG8gYW4gYXJyYXlcbiAgICBuYW1lcyA9IG5hbWVzLnNwbGl0KCcgJyk7XG5cbiAgICBmb3IgKGxldCBuYW1lIG9mIG5hbWVzKSB7IFxuICAgICAgaWYgKGZ1bmNzID0gdGhpcy5ldmVudHNbbmFtZV0pIHtcblxuICAgICAgICAvLyBkZWxldGUgYWxsIGlmIGBmdW5jYCBub3QgcGFzc2VkXG4gICAgICAgIGlmIChmdW5jID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5ldmVudHNbbmFtZV07XG5cbiAgICAgICAgLy8gZGVsZXRlIHNwZWNpZmljIGZ1bmN0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICB9IGVsc2UgaWYgKChpbmRleCA9IGZ1bmNzLmluZGV4T2YoZnVuYykpICE9PSAtMSkge1xuICAgICAgICAgIGZ1bmNzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAgICAgICAvLyByZW1vdmUgZnJvbSBgZXZlbnRzYCBpZiBlbXB0eVxuICAgICAgICAgIGlmIChmdW5jcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmV2ZW50c1tuYW1lXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHRyaWdnZXIgZXZlbnRzIGF0dGFjaGVkIHRvIHRoZSBlZGl0b3JcbiAgdHJpZ2dlcihuYW1lKSB7XG4gICAgdmFyIGZ1bmNzO1xuXG4gICAgaWYgKGZ1bmNzID0gdGhpcy5ldmVudHNbbmFtZV0pIHtcbiAgICAgIGZvciAobGV0IGZ1bmMgb2YgZnVuY3MpIHtcbiAgICAgICAgZnVuYy5hcHBseSh0aGlzLCBfLnNsaWNlKGFyZ3VtZW50cywgMSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gaG9vayBpbnRvIERPTSBldmVudHMgYW5kIHNldCBzb21lIGRlZmF1bHRzXG4gIGFkZEV2ZW50cygpIHtcbiAgICB2YXJcblxuICAgICAgLy8gd3JhcHBlciB0byB0cmlnZ2VyIGVkaXRvciBldmVudHNcbiAgICAgIGZpcmVFdmVudCA9IGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKGV2ZW50LnR5cGUsIGV2ZW50KTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIERPTSBldmVudHMgdG8gaG9vayBpbnRvXG4gICAgICBkb21FdmVudHMgPSBbXG4gICAgICAgICdtb3VzZXVwJywgJ21vdXNlZG93bicsICdjbGljaycsXG4gICAgICAgICdtb3VzZW92ZXInLCAnbW91c2VvdXQnLFxuICAgICAgICAna2V5dXAnLCAna2V5ZG93bicsICdrZXlwcmVzcycsIFxuICAgICAgICAnZm9jdXMnLCAnYmx1cidcbiAgICAgIF07XG5cbiAgICAvLyBob29rIGludG8gRE9NIGV2ZW50c1xuICAgIGZvciAobGV0IGV2dCBvZiBkb21FdmVudHMpIHtcbiAgICAgIHRoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoZXZ0LCBmaXJlRXZlbnQpO1xuICAgIH1cblxuICAgIC8vIGRlZmF1bHQgZXZlbnRzXG5cbiAgICAvLyBzaG93IHRvb2xiYXIgd2hlbiBhIHNlbGVjdGlvbiBtaWdodCBiZSBtYWRlXG4gICAgdGhpcy5vbignbW91c2V1cCBrZXl1cCcsIHRoaXMuc2hvd1Rvb2xiYXIpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyByZWdpc3RlcnMgc29tZSBkZWZhdWx0IGNvbW1hbmRzIGFuZCBpbml0aWFsaXplcyB0aGUgdG9vbGJhclxuICBpbml0VG9vbGJhcihvcHRzKSB7XG5cbiAgICAvLyByZWdpc3RlciBzb21lIGhlbHBmdWwgY29tbWFuZHNcbiAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZCh7XG5cbiAgICAgIC8vIHRvZ2dsZSBsaW5rIGFjdGlvblxuICAgICAgJ3RvZ2dsZUxpbmsnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbHM7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGNsb3Nlc3QgbGlua1xuICAgICAgICBpZiAoKGVscyA9IHRoaXMuc2VsZWN0aW9uLmlzV2l0aGluKCdhJykpKSB7XG4gICAgICAgICAgZWxzLmZvckVhY2goXy51bndyYXApO1xuICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnJlc3RvcmUoKTtcblxuICAgICAgICAvLyB1bmxpbmsgc2VsZWN0ZWQgbGlua1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0aW9uLmNvbnRhaW5zKCdhJykpIHtcbiAgICAgICAgICB0aGlzLmV4ZWNDb21tYW5kKCd1bmxpbmsnKTtcblxuICAgICAgICAvLyBzaG93IGlucHV0IHRvIGNyZWF0ZSBsaW5rXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50b29sYmFyLnRvZ2dsZUlucHV0KCdodHRwOi8vLi4uJywgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV4ZWNDb21tYW5kKCdjcmVhdGVMaW5rJywgdmFsdWUsICEhdmFsdWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAndG9nZ2xlQmxvY2snOiBmdW5jdGlvbiAodGFnTmFtZSkge1xuXG4gICAgICAgIC8vIGZvcm1hdCBhcyBwYXJhZ3JhcGhcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uLmlzV2l0aGluKHRhZ05hbWUpKSB7XG4gICAgICAgICAgdGhpcy5leGVjQ29tbWFuZCgnZm9ybWF0QmxvY2snLCAncCcpO1xuXG4gICAgICAgIC8vIGZvcm1hdCBhcyBgdGFnTmFtZWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmV4ZWNDb21tYW5kKCdmb3JtYXRCbG9jaycsIHRhZ05hbWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAndG9nZ2xlVGFnJzogZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgICAgdmFyIGVscztcblxuICAgICAgICAvLyByZW1vdmUgY2xvc2VzdCBtYXRjaGluZyB0YWdcbiAgICAgICAgaWYgKChlbHMgPSB0aGlzLnNlbGVjdGlvbi5pc1dpdGhpbih0YWdOYW1lKSkpIHtcbiAgICAgICAgICAvLyBUT0RPOiBcbiAgICAgICAgICAvLyAgIEluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZSB0YWcsIGJyZWFrIHNlbGVjdGlvbiBvdXQgb2YgdGFnIGxpa2UgXG4gICAgICAgICAgLy8gICBib2xkL2l0YWxpYyBkZWZhdWx0IGJlaGF2aW9yLlxuICAgICAgICAgIGVscy5mb3JFYWNoKF8udW53cmFwKTtcbiAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5yZXN0b3JlKCk7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGlubmVyIHRhZ3NcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGlvbi5jb250YWlucyh0YWdOYW1lKSkge1xuICAgICAgICAgIGxldCByZWcgPSBuZXcgUmVnRXhwKCc8JyArIHRhZ05hbWUgKyAnKC4qPyk+fDwvJyArIHRhZ05hbWUgKyAnPicsICdnJyk7XG4gICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucmVwbGFjZSh0aGlzLnNlbGVjdGlvbi5odG1sLnJlcGxhY2UocmVnLCAnJykpO1xuXG4gICAgICAgIC8vIHdyYXAgd2l0aCB0YWdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5yZXBsYWNlKGA8JHt0YWdOYW1lfT4ke3RoaXMuc2VsZWN0aW9uLmh0bWx9PC8ke3RhZ05hbWV9PmApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyB0ZXN0aW5nXG5cbiAgICB2YXIgY29tbWFuZFdyYXBwZXIgPSAoY21kLCB2YWx1ZSkgPT4ge1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhlY0NvbW1hbmQoY21kLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgcXVlcnlXcmFwcGVyID0gcXVlcnkgPT4ge1xuICAgICAgcmV0dXJuICgpID0+IHtcblxuICAgICAgICAvLyBmb3JjZSBhY3RpdmUgc3RhdGVcbiAgICAgICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGlua3MgJiBjb2RlXG4gICAgICAgIGlmICgvXihhfGNvZGUpJC8udGVzdChxdWVyeSkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb24uY29udGFpbnMocXVlcnkpIHx8IFxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uaXNXaXRoaW4ocXVlcnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaGVhZGluZ3MgJiBibG9ja3F1b3RlXG4gICAgICAgIGlmICgvXihoKDJ8Myl8YmxvY2txdW90ZSkkLy50ZXN0KHF1ZXJ5KSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbi5pc1dpdGhpbihxdWVyeSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZWZhdWx0XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShxdWVyeSk7XG4gICAgICB9O1xuICAgIH07XG4gICAgXG4gICAgdGhpcy50b29sYmFyID0gbmV3IEVkaXRvclRvb2xiYXIoe1xuICAgICAgb25JbnB1dENhbmNlbDogKCkgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5yZXN0b3JlKCk7XG4gICAgICB9LFxuXG4gICAgICBidXR0b25zOiBbe1xuICAgICAgICBjb250ZW50OiAnQicsXG4gICAgICAgIGFjdGlvbjogY29tbWFuZFdyYXBwZXIoJ2JvbGQnKSxcbiAgICAgICAgYWN0aXZlOiBxdWVyeVdyYXBwZXIoJ2JvbGQnKVxuICAgICAgfSwge1xuICAgICAgICBjb250ZW50OiAnSScsXG4gICAgICAgIGFjdGlvbjogY29tbWFuZFdyYXBwZXIoJ2l0YWxpYycpLFxuICAgICAgICBhY3RpdmU6IHF1ZXJ5V3JhcHBlcignaXRhbGljJylcbiAgICAgIH0sIHtcbiAgICAgICAgY29udGVudDogJ0EnLFxuICAgICAgICBhY3Rpb246IGNvbW1hbmRXcmFwcGVyKCd0b2dnbGVMaW5rJyksXG4gICAgICAgIGFjdGl2ZTogcXVlcnlXcmFwcGVyKCdhJylcbiAgICAgIH0sIHtcbiAgICAgICAgY29udGVudDogJ0gxJyxcbiAgICAgICAgYWN0aW9uOiBjb21tYW5kV3JhcHBlcigndG9nZ2xlQmxvY2snLCAnaDInKSxcbiAgICAgICAgYWN0aXZlOiBxdWVyeVdyYXBwZXIoJ2gyJylcbiAgICAgIH0sIHtcbiAgICAgICAgY29udGVudDogJ0gyJyxcbiAgICAgICAgYWN0aW9uOiBjb21tYW5kV3JhcHBlcigndG9nZ2xlQmxvY2snLCAnaDMnKSxcbiAgICAgICAgYWN0aXZlOiBxdWVyeVdyYXBwZXIoJ2gzJylcbiAgICAgIH0sIHtcbiAgICAgICAgY29udGVudDogJ1wiJyxcbiAgICAgICAgYWN0aW9uOiBjb21tYW5kV3JhcHBlcigndG9nZ2xlQmxvY2snLCAnYmxvY2txdW90ZScpLFxuICAgICAgICBhY3RpdmU6IHF1ZXJ5V3JhcHBlcignYmxvY2txdW90ZScpXG4gICAgICB9LCB7XG4gICAgICAgIGNvbnRlbnQ6ICcmbHQ7LyZndDsnLFxuICAgICAgICBhY3Rpb246IGNvbW1hbmRXcmFwcGVyKCd0b2dnbGVUYWcnLCAnY29kZScpLFxuICAgICAgICBhY3RpdmU6IHF1ZXJ5V3JhcHBlcignY29kZScpXG4gICAgICB9XVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBzaG93cyB0aGUgdG9vbGJhciAoaGlkZXMgaWYgbm8gc2VsZWN0aW9uKVxuICAvLyBUT0RPOiBhZGQgY29udGV4dCBhcmd1bWVudCB0byBzaG93L2hpZGUgZGlmZmVyZW50IHRvb2xiYXJzXG4gIHNob3dUb29sYmFyKCkge1xuICAgIHZhciBib3VuZGFyeSwgdG9vbGJhckhlaWdodCwgdG9vbGJhckhhbGZXaWR0aCxcbiAgICAgIHBvaW50ID0ge307XG5cbiAgICAvLyBzYXZlIHNlbGVjdGlvbiBpbiBjYXNlIGZvY3VzIGNoYW5nZXMgbGF0ZXJcbiAgICB0aGlzLnNlbGVjdGlvbi5zYXZlKCk7XG4gICAgXG4gICAgLy8gaGlkZSB0aGUgdG9vbGJhciBpZiBub3RoaW5nIGlzIHNlbGVjdGVkXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uLmlzQ29sbGFwc2VkKSB7XG4gICAgICB0aGlzLnRvb2xiYXIuaGlkZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGdldCBzdGFydGluZyBwb2ludHMgZm9yIHRvb2xiYXJcbiAgICBib3VuZGFyeSA9IHRoaXMuc2VsZWN0aW9uLmdldFJhbmdlQm91bmRhcnkoKTtcbiAgICBwb2ludC54ID0gKGJvdW5kYXJ5LmxlZnQgKyBib3VuZGFyeS5yaWdodCkgLyAyO1xuICAgIHBvaW50LnkgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG5cbiAgICAvLyBnZXQgZGltZW5zaW9ucyBvZiB0b29sYmFyXG4gICAgdGhpcy50b29sYmFyLmRvbS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0b29sYmFySGVpZ2h0ID0gdGhpcy50b29sYmFyLmRvbS5vZmZzZXRIZWlnaHQ7XG4gICAgdG9vbGJhckhhbGZXaWR0aCA9IHRoaXMudG9vbGJhci5kb20ub2Zmc2V0V2lkdGggLyAyO1xuICAgIHRoaXMudG9vbGJhci5kb20uc3R5bGUuZGlzcGxheSA9ICcnO1xuXG4gICAgLy8gY2VudGVyIHRvb2xiYXIgdW5kZXIgc2VsZWN0aW9uXG4gICAgaWYgKGJvdW5kYXJ5LnRvcCA8IHRvb2xiYXJIZWlnaHQpIHtcbiAgICAgIHRoaXMudG9vbGJhci5wb3NpdGlvbignYm90dG9tJyk7XG4gICAgICBwb2ludC55ICs9IGJvdW5kYXJ5LmJvdHRvbTtcblxuICAgIC8vIGNlbnRlciB0b29sYmFyIGFib3ZlIHNlbGVjdGlvblxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRvb2xiYXIucG9zaXRpb24oJ3RvcCcpO1xuICAgICAgcG9pbnQueSArPSBib3VuZGFyeS50b3A7XG4gICAgfVxuXG4gICAgLy8gc25hcCB0b29sYmFyIHRvIGxlZnQgZWRnZVxuICAgIGlmIChwb2ludC54IDwgdG9vbGJhckhhbGZXaWR0aCkge1xuICAgICAgcG9pbnQueCArPSB0b29sYmFySGFsZldpZHRoIC0gcG9pbnQueDtcblxuICAgIC8vIHNuYXAgdG9vbGJhciB0byByaWdodCBlZGdlIChhZGp1c3RlZCBmb3Igc2Nyb2xsYmFyKVxuICAgIH0gZWxzZSBpZiAod2luZG93LmlubmVyV2lkdGggLSBfLnNjcm9sbGJhcldpZHRoKCkgLSBwb2ludC54IDwgdG9vbGJhckhhbGZXaWR0aCkge1xuICAgICAgcG9pbnQueCAtPSB0b29sYmFySGFsZldpZHRoIC0gKHdpbmRvdy5pbm5lcldpZHRoIC0gcG9pbnQueCAtIF8uc2Nyb2xsYmFyV2lkdGgoKSk7XG4gICAgfVxuXG4gICAgLy8gc2hvdyB0b29sYmFyXG4gICAgdGhpcy50b29sYmFyLnNob3cocG9pbnQueCwgcG9pbnQueSk7XG4gIH1cbn1cblxud2luZG93LkVkaXRvciA9IEVkaXRvcjtcblxuZXhwb3J0IGRlZmF1bHQgRWRpdG9yO1xuIiwiaW1wb3J0IF8gZnJvbSAnLi9oZWxwZXJzJztcblxuY29uc3QgRElSUkVHID0gLyg/Ol58XFxzKShwbS0tKHRvcHxib3R0b218bGVmdHxyaWdodCkpKD86XFxzfCQpLztcblxuY2xhc3MgRWRpdG9yVG9vbGJhciB7XG4gIGNvbnN0cnVjdG9yKG9wdHMgPSB7fSkge1xuXG4gICAgdGhpcy5idXR0b25zID0gb3B0cy5idXR0b25zIHx8IHt9O1xuICAgIFxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5idWlsZCgpKTtcblxuICAgIHRoaXMucG9zaXRpb24ob3B0cy5wb3NpdGlvbiB8fCAndG9wJyk7XG4gICAgdGhpcy5jYW5jZWxJbnB1dCA9IG9wdHMub25JbnB1dENhbmNlbCB8fCBfLm5vb3A7XG5cbiAgICB0aGlzLmhpZGUoKTtcbiAgfVxuXG4gIHNob3coeCwgeSkge1xuXG4gICAgdGhpcy5kb20uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgIHRoaXMuZG9tLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xuICAgIHRoaXMuZG9tLnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcblxuICAgIC8vIHByZXZlbnQgYW5pbWF0aW9uIGZyb20gbm90IHJ1bm5pbmdcbiAgICBfLmRlZmVyKCgpID0+IHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQoJ3BtLS1zaG93JykpO1xuXG4gICAgLy8gY2hlY2sgaWYgYnV0dG9ucyBzaG91bGQgYmUgYWN0aXZlXG4gICAgdGhpcy5idXR0b25zLmZvckVhY2goYnRuID0+IGJ0bi50b2dnbGUoKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5kb20uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLmRvbS5zdHlsZS50b3AgPSB0aGlzLmRvbS5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgdGhpcy5kb20uY2xhc3NMaXN0LnJlbW92ZSgncG0tLXNob3cnKTtcbiAgICB0aGlzLnRvZ2dsZUlucHV0KGZhbHNlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldCB2aXNpYmxlKCkge1xuICAgIHJldHVybiB0aGlzLmRvbS5jbGFzc0xpc3QuY29udGFpbnMoJ3BtLS1zaG93Jyk7XG4gIH1cblxuICB0b2dnbGVJbnB1dChwbGFjZWhvbGRlciwgdmFsdWUsIGNhbGxiYWNrLCBmb3JjZSkge1xuICAgIHZhciBjdHJsID0gdGhpcy5kb20uZmlyc3RDaGlsZC5sYXN0Q2hpbGQsXG4gICAgICB2aXNpYmxlID0gY3RybC5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snO1xuXG4gICAgLy8gYGZvcmNlYCBhcmd1bWVudCBhbHdheXMgY29tZXMgbGFzdFxuICAgIGxldCBsYXN0QXJnID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTtcbiAgICBmb3JjZSA9IHR5cGVvZiBsYXN0QXJnID09PSAnYm9vbGVhbicgPyBsYXN0QXJnIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gYGNhbGxiYWNrYCBjYW4gc29tZXRpbWVzIGJlIHNlY29uZCBhcmd1bWVudFxuICAgIGNhbGxiYWNrID0gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID8gdmFsdWUgOiBjYWxsYmFjaztcbiAgICBjYWxsYmFjayA9IHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gYHBsYWNlaG9sZGVyYCBhbmQgYHZhbHVlYCBtdXN0IGJlIHN0cmluZ3NcbiAgICBwbGFjZWhvbGRlciA9IHR5cGVvZiBwbGFjZWhvbGRlciA9PT0gJ3N0cmluZycgPyBwbGFjZWhvbGRlciA6ICcnO1xuICAgIHZhbHVlID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogJyc7XG5cbiAgICAvLyBjYW5ub3Qgc2hvdyBpbnB1dCB3aGVuIHRvb2xiYXIgaXMgdG8gbGVmdCBvciByaWdodFxuICAgIGlmICgvbGVmdHxyaWdodC8udGVzdCh0aGlzLnBvc2l0aW9uKCkpKSB7XG4gICAgICBmb3JjZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIG92ZXJyaWRlIGB2aXNpYmxlYCB3aGVuIGZvcmNlZFxuICAgIHZpc2libGUgPSB1bmRlZmluZWQgPT09IGZvcmNlID8gdmlzaWJsZSA6ICFmb3JjZTtcblxuICAgIC8vIHNldCBwcm9wZXJ0aWVzXG4gICAgY3RybC5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCBwbGFjZWhvbGRlcik7XG4gICAgY3RybC5maXJzdENoaWxkLnZhbHVlID0gdmFsdWU7XG5cbiAgICAvLyBub3QgdmlzaWJsZVxuICAgIGlmICghdmlzaWJsZSkge1xuICAgICAgdGhpcy5pbnB1dENhbGxiYWNrID0gY2FsbGJhY2sgfHwgXy5ub29wO1xuXG4gICAgICAvLyBzZXQgZXhwbGljaXQgd2lkdGggZm9yIHRyYW5zaXRpb25cbiAgICAgIHRoaXMuZG9tLnN0eWxlLndpZHRoID0gdGhpcy5kb20ub2Zmc2V0V2lkdGggKyAncHgnO1xuXG4gICAgICAvLyBzaG93IGlucHV0IHdpdGggcHJvcGVyIHdpZHRoXG4gICAgICBjdHJsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICBsZXQgYmlnZ2VySW5wdXQgPSB0aGlzLmRvbS5vZmZzZXRXaWR0aCA8IGN0cmwub2Zmc2V0V2lkdGg7XG4gICAgICB0aGlzLmRvbS5zdHlsZS53aWR0aCA9IGJpZ2dlcklucHV0ID8gY3RybC5vZmZzZXRXaWR0aCArICdweCcgOiAnJztcblxuICAgICAgLy8gcHJldmVudCBhbmltYXRpb24gZnJvbSBub3QgcnVubmluZ1xuICAgICAgXy5kZWZlcigoKSA9PiB0aGlzLmRvbS5jbGFzc0xpc3QuYWRkKCdwbS0taW5wdXQnKSk7XG5cbiAgICAvLyB2aXNpYmxlXG4gICAgfSBlbHNlIHtcbiAgICAgIFxuICAgICAgLy8gcmVzZXQgZXZlcnl0aGluZ1xuICAgICAgY3RybC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICBjdHJsLmZpcnN0Q2hpbGQudmFsdWUgPSAnJztcbiAgICAgIHRoaXMuaW5wdXRDYWxsYmFjayA9IF8ubm9vcDtcbiAgICAgIHRoaXMuZG9tLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICB0aGlzLmRvbS5jbGFzc0xpc3QucmVtb3ZlKCdwbS0taW5wdXQnKTtcbiAgICB9XG4gIH1cblxuICBwb3NpdGlvbihkaXIpIHtcbiAgICB2YXIgb2xkZGlyID0gRElSUkVHLmV4ZWModGhpcy5kb20uY2xhc3NOYW1lKTtcblxuICAgIC8vIG5vIGFyZ3VtZW50czsgcmV0dXJuIGN1cnJlbnQgcG9zaXRpb25cbiAgICBpZiAodW5kZWZpbmVkID09PSBkaXIpIHsgXG4gICAgICByZXR1cm4gb2xkZGlyWzJdIHx8IG51bGw7IFxuICAgIH1cblxuICAgIC8vIHVucmVjb2duaXplZCBkaXJlY3Rpb25cbiAgICBpZiAoIS90b3B8Ym90dG9tfGxlZnR8cmlnaHQvLnRlc3QoZGlyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyByZW1vdmUgb2xkIGRpcmVjdGlvblxuICAgIGlmIChvbGRkaXIpIHtcbiAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5yZW1vdmUob2xkZGlyWzFdKTtcbiAgICB9XG5cbiAgICAvLyBhZGQgbmV3IGRpcmVjdGlvblxuICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQoJ3BtLS0nICsgZGlyKTtcbiAgICBcbiAgICAvLyBpbnB1dCBpcyBkaXNhYmxlZCBmb3IgbGVmdCBhbmQgcmlnaHQgcG9zaXRpb25lZFxuICAgIGlmICgvbGVmdHxyaWdodC8udGVzdChkaXIpKSB7XG4gICAgICB0aGlzLnRvZ2dsZUlucHV0KGZhbHNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGJ1aWxkKCkge1xuICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkb20uY2xhc3NOYW1lID0gJ3BtJztcblxuICAgIC8vIGFkZCBsaXN0IGVsZW1lbnRcbiAgICBkb20uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKSk7XG4gICAgXG4gICAgLy8gYWRkIGVhY2ggYnV0dG9uIGFuZCBhdHRhdGNoIGV2ZW50c1xuICAgIHRoaXMuYnV0dG9ucy5mb3JFYWNoKChidG4sIGksIGJ0bnMpID0+IHtcbiAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gJ3BtX19idG4nO1xuXG4gICAgICAvLyBhZGQgc3BlY2lhbCBjbGFzcyB0byBmaXJzdCBhbmQgbGFzdCBidXR0b25cbiAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG1fX2J0bi0tZmlyc3QnKTtcbiAgICAgIH0gZWxzZSBpZiAoaSA9PT0gYnRucy5sZW5ndGggLSAxKSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG1fX2J0bi0tbGFzdCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBjdXN0b21pemUgYnV0dG9uXG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYnRuLmNsYXNzTmFtZSk7XG4gICAgICBlbGVtZW50LmlubmVySFRNTCA9IGJ0bi5jb250ZW50O1xuXG4gICAgICAvLyBkbyBidXR0b24gYWN0aW9uIG9uIGNsaWNrXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYnRuLmFjdGlvbi5iaW5kKHRoaXMpKTtcblxuICAgICAgLy8gYXBwZW5kIGJ1dHRvbiB0byBsaXN0IGVsZW1lbnRcbiAgICAgIGJ0bi5lbGVtZW50ID0gZG9tLmZpcnN0Q2hpbGRcbiAgICAgICAgLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpXG4gICAgICAgIC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgIFxuICAgICAgLy8gdG9nZ2xlIGJ1dHRvbidzIGFjdGl2ZSBzdGF0ZVxuICAgICAgYnRuLnRvZ2dsZSA9ICgpID0+IHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCBidG4uYWN0aXZlKCkpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBhZGQgaW5wdXQgdG8gbGlzdCBlbGVtZW50XG4gICAgbGV0IGlucHV0ID0gZG9tLmZpcnN0Q2hpbGRcbiAgICAgIC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKVxuICAgICAgLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykpO1xuXG4gICAgaW5wdXQuY2xhc3NOYW1lID0gJ3BtX19jb250cm9sJztcblxuICAgIC8vIG9uIGVudGVyLCBkbyBpbnB1dCBhY3Rpb25cbiAgICB0aGlzLmlucHV0Q2FsbGJhY2sgPSBfLm5vb3A7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBldmVudCA9PiB7XG4gICAgICBpZiAoKGV2ZW50LndoaWNoIHx8IGV2ZW50LmtleUNvZGUpID09PSAxMykge1xuICAgICAgICB0aGlzLmlucHV0Q2FsbGJhY2soaW5wdXQudmFsdWUpO1xuICAgICAgICB0aGlzLnRvZ2dsZUlucHV0KGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGFmdGVyIGlucHV0IHRyYW5zaXRpb25zLCBmb2N1cyBpdFxuICAgIGlucHV0LnBhcmVudE5vZGUuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IGlucHV0LmZvY3VzKCkpO1xuICAgIFxuICAgIC8vIGFkZCBjYW5jZWwgZWxlbWVudCB0byBpbnB1dCBjb250YWluZXJcbiAgICBpbnB1dC5wYXJlbnROb2RlXG4gICAgICAuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpXG4gICAgICAuY2xhc3NOYW1lID0gJ3BtX19jYW5jZWwnO1xuXG4gICAgLy8gY2xvc2UgaW5wdXQgb24gY2FuY2VsXG4gICAgaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlSW5wdXQoZmFsc2UpO1xuICAgICAgICB0aGlzLmNhbmNlbElucHV0KCk7XG4gICAgICB9KTtcblxuICAgIHJldHVybiAodGhpcy5kb20gPSBkb20pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEVkaXRvclRvb2xiYXI7XG4iLCIvLyBjYWNoZSBzY3JvbGxiYXIgd2lkdGhcbnZhciBzY3JvbGxiYXJXaWR0aDtcblxudmFyIF8gPSB7XG4gIFxuICBzbGljZTogQXJyYXkucHJvdG90eXBlLnNsaWNlLFxuICBrZXlzOiBPYmplY3Qua2V5cyxcblxuICBpc0VsZW1lbnQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gIH0sXG5cbiAgdG9IVE1MOiBmdW5jdGlvbiAoZWxzKSB7XG4gICAgdmFyIGh0bWwsIFxuICAgICAgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIFxuICAgIGVscyA9IGVscy5sZW5ndGggPyBfLnNsaWNlLmNhbGwoZWxzKSA6IFtlbHNdO1xuICAgIFxuICAgIGZvciAobGV0IGVsIG9mIGVscykge1xuICAgICAgdGVtcC5hcHBlbmRDaGlsZChlbCk7XG4gICAgfVxuICAgIFxuICAgIGh0bWwgPSB0ZW1wLmlubmVySFRNTDtcbiAgICB0ZW1wID0gbnVsbDtcbiAgICBcbiAgICByZXR1cm4gaHRtbDtcbiAgfSxcblxuICB1bndyYXA6IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBub2RlLFxuICAgICAgcGFyZW50ID0gZWwucGFyZW50Tm9kZSxcbiAgICAgIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgXG4gICAgd2hpbGUgKChub2RlID0gZWwuZmlyc3RDaGlsZCkpIHtcbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgfVxuXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShmcmFnLCBlbCk7XG4gICAgcGFyZW50LnJlbW92ZUNoaWxkKGVsKTtcblxuICAgIHJldHVybiBmcmFnO1xuICB9LFxuXG4gIGNsb3Nlc3Q6IGZ1bmN0aW9uIChjaGlsZCwgcGFyZW50KSB7XG4gICAgdmFyIG5vZGU7XG5cbiAgICB3aGlsZSAobm9kZSA9IGNoaWxkLnBhcmVudE5vZGUpIHtcbiAgICAgIGlmIChub2RlID09PSBwYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGdldFRleHROb2RlczogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB2YXIgbm9kZXMgPSBbXTtcblxuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY2hpbGRyZW4gPSBfLnNsaWNlLmNhbGwobm9kZS5jaGlsZE5vZGVzKTtcblxuICAgICAgZm9yIChsZXQgY2hpbGQgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgbm9kZXMucHVzaC5hcHBseShub2RlcywgXy5nZXRUZXh0Tm9kZXMoY2hpbGQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZXM7XG4gIH0sXG5cbiAgc2Nyb2xsYmFyV2lkdGg6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2Nyb2xsYmFyV2lkdGgpIHsgcmV0dXJuIHNjcm9sbGJhcldpZHRoOyB9XG5cbiAgICB2YXIgd2lkdGhOb1Njcm9sbCwgd2lkdGhXaXRoU2Nyb2xsLFxuICAgICAgb3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgaW5uZXIgPSBvdXRlci5jbG9uZU5vZGUoKTtcblxuICAgIG91dGVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgIG91dGVyLnN0eWxlLndpZHRoID0gXCIxMDBweFwiO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG5cbiAgICB3aWR0aE5vU2Nyb2xsID0gb3V0ZXIub2Zmc2V0V2lkdGg7XG4gICAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSBcInNjcm9sbFwiO1xuXG4gICAgaW5uZXIuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICBvdXRlci5hcHBlbmRDaGlsZChpbm5lcik7ICAgICAgICBcblxuICAgIHdpZHRoV2l0aFNjcm9sbCA9IGlubmVyLm9mZnNldFdpZHRoO1xuXG4gICAgb3V0ZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvdXRlcik7XG5cbiAgICByZXR1cm4gKHNjcm9sbGJhcldpZHRoID0gd2lkdGhOb1Njcm9sbCAtIHdpZHRoV2l0aFNjcm9sbCk7XG4gIH0sXG5cbiAgbm9vcDogZnVuY3Rpb24gKCkge30sXG5cbiAgbm93OiBEYXRlLm5vdyxcblxuICBkZWxheTogZnVuY3Rpb24gKGZuLCB3YWl0KSB7XG4gICAgdmFyIGFyZ3MgPSBfLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfSwgd2FpdCk7XG4gIH0sXG5cbiAgZGVmZXI6IGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiBfLmRlbGF5LmFwcGx5KF8sIFtmbiwgMV0uY29uY2F0KF8uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IF87XG4iLCJpbXBvcnQgXyBmcm9tICcuL2hlbHBlcnMnO1xuXG5jbGFzcyBTZWxlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3Rvci5pbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgdGhpcy5jb25zdHJ1Y3Rvci5pbnN0YW5jZSA9IHRoaXM7XG4gIH1cblxuICBnZXQoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgfVxuXG4gIHNhdmUoKSB7XG4gICAgdmFyIHNhdmVkID0gW10sXG4gICAgICByYW5nZSA9IHRoaXMucmFuZ2U7XG5cbiAgICBzYXZlZFswXSA9IHJhbmdlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyO1xuICAgIHNhdmVkWzJdID0gdGhpcy5nZXRDYXJldE9mZnNldChzYXZlZFswXSk7XG4gICAgc2F2ZWRbMV0gPSBzYXZlZFsyXSAtIHJhbmdlLnRvU3RyaW5nKCkubGVuZ3RoO1xuXG4gICAgdGhpcy5zYXZlZCA9IHNhdmVkO1xuICB9XG5cbiAgcmVzdG9yZSgpIHtcbiAgICB0aGlzLnNlbGVjdC5hcHBseSh0aGlzLCB0aGlzLnNhdmVkKTtcbiAgfVxuXG4gIGdldFJhbmdlQm91bmRhcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMucmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIH1cblxuICBjb2xsYXBzZVRvRW5kKCkge1xuICAgIHRoaXMuZ2V0KCkuY29sbGFwc2VUb0VuZCgpO1xuICB9XG5cbiAgc2VsZWN0KG5vZGUsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgc2VsZWN0aW9uID0gdGhpcy5nZXQoKSxcbiAgICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuXG4gICAgcmFuZ2Uuc2VsZWN0Tm9kZShub2RlKTtcblxuICAgIGlmIChzdGFydCAhPT0gdW5kZWZpbmVkICYmIGVuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBsZXQgdGV4dE5vZGVzID0gXy5nZXRUZXh0Tm9kZXMobm9kZSk7XG4gICAgICBsZXQgZm91bmRTdGFydCA9IGZhbHNlO1xuICAgICAgbGV0IGNoYXJDb3VudCA9IDA7XG4gICAgICBsZXQgZW5kQ2hhckNvdW50O1xuXG4gICAgICBmb3IgKGxldCB0ZXh0Tm9kZSBvZiB0ZXh0Tm9kZXMpIHtcbiAgICAgICAgZW5kQ2hhckNvdW50ID0gY2hhckNvdW50ICsgdGV4dE5vZGUubGVuZ3RoO1xuXG4gICAgICAgIGlmICghZm91bmRTdGFydCAmJiBzdGFydCA+PSBjaGFyQ291bnQgJiZcbiAgICAgICAgICAgIChzdGFydCA8IGVuZENoYXJDb3VudCB8fCBzdGFydCA9PT0gZW5kQ2hhckNvdW50KSkge1xuICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KHRleHROb2RlLCBzdGFydCAtIGNoYXJDb3VudCk7XG4gICAgICAgICAgZm91bmRTdGFydCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm91bmRTdGFydCAmJiBlbmQgPD0gZW5kQ2hhckNvdW50KSB7XG4gICAgICAgICAgcmFuZ2Uuc2V0RW5kKHRleHROb2RlLCBlbmQgLSBjaGFyQ291bnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hhckNvdW50ID0gZW5kQ2hhckNvdW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICB9XG5cbiAgcmVwbGFjZShjb250ZW50KSB7XG4gICAgdmFyIG5vZGUsIGxhc3ROb2RlLFxuICAgICAgc2VsZWN0aW9uID0gdGhpcy5nZXQoKSxcbiAgICAgIHJhbmdlID0gdGhpcy5yYW5nZSxcbiAgICAgIGV4cGFuZGVkUmFuZ2UgPSByYW5nZS5jbG9uZVJhbmdlKCksXG4gICAgICB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgdGVtcC5pbm5lckhUTUwgPSBjb250ZW50O1xuXG4gICAgd2hpbGUgKChub2RlID0gdGVtcC5maXJzdENoaWxkKSkge1xuICAgICAgbGFzdE5vZGUgPSBmcmFnLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgIH1cblxuICAgIHJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgcmFuZ2UuaW5zZXJ0Tm9kZShmcmFnKTtcblxuICAgIGlmIChsYXN0Tm9kZSkge1xuICAgICAgZXhwYW5kZWRSYW5nZS5zZXRFbmRBZnRlcihsYXN0Tm9kZSk7XG4gICAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UoZXhwYW5kZWRSYW5nZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FyZXRPZmZzZXQobm9kZSkge1xuICAgIHZhciByYW5nZSA9IHRoaXMucmFuZ2U7XG5cbiAgICB2YXIgcHJlQ2FyZXRSYW5nZSA9IHJhbmdlLmNsb25lUmFuZ2UoKTtcbiAgICBwcmVDYXJldFJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhub2RlKTtcbiAgICBwcmVDYXJldFJhbmdlLnNldEVuZChyYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7XG5cbiAgICByZXR1cm4gcHJlQ2FyZXRSYW5nZS50b1N0cmluZygpLmxlbmd0aDtcbiAgfVxuXG4gIGNvbnRhaW5zKHRhZ05hbWUpIHtcbiAgICB2YXIgdGFnUmVnID0gbmV3IFJlZ0V4cCgnPCcgKyB0YWdOYW1lICsgJyguKj8pPnw8LycgKyB0YWdOYW1lICsgJz4nKTtcbiAgICByZXR1cm4gdGFnUmVnLnRlc3QodGhpcy5odG1sKTtcbiAgfVxuXG4gIGlzV2l0aGluKHRhZ05hbWUsIGxpbWl0Tm9kZSkge1xuICAgIHZhciByZXQgPSBbXSwgXG4gICAgICByYW5nZSA9IHRoaXMucmFuZ2UsXG4gICAgICBzdGFydFBhcmVudCA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyLnBhcmVudE5vZGUsXG4gICAgICBlbmRQYXJlbnQgPSByYW5nZS5lbmRDb250YWluZXIucGFyZW50Tm9kZSxcbiAgICAgIG5vZGUgPSByYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtcblxuICAgIC8vIGNvcnJlY3QgYHRhZ05hbWVgXG4gICAgdGFnTmFtZSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTtcblxuICAgIC8vIGBzdGFydFBhcmVudGAgaGFzIGB0YWdOYW1lYFxuICAgIGlmIChzdGFydFBhcmVudC50YWdOYW1lID09PSB0YWdOYW1lKSB7XG4gICAgICByZXQucHVzaChzdGFydFBhcmVudCk7XG4gICAgfVxuXG4gICAgLy8gYGVuZFBhcmVudGAgaXNuJ3QgYHN0YXJ0UGFyZW50YCBhbmQgaXQgaGFzIGB0YWdOYW1lYFxuICAgIGlmIChlbmRQYXJlbnQgIT09IHN0YXJ0UGFyZW50ICYmIGVuZFBhcmVudC50YWdOYW1lID09PSB0YWdOYW1lKSB7XG4gICAgICByZXQucHVzaChlbmRQYXJlbnQpO1xuICAgIH1cblxuICAgIC8vIGlmIGBzdGFydFBhcmVudGAgb3IgYGVuZFBhcmVudGAgbWF0Y2gsIHdlJ3JlIGRvbmVcbiAgICBpZiAocmV0Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgLy8gbGltaXQgdG8gYm9keVxuICAgIGxpbWl0Tm9kZSA9IHVuZGVmaW5lZCA9PT0gbGltaXROb2RlID8gZG9jdW1lbnQuYm9keSA6IGxpbWl0Tm9kZTtcblxuICAgIC8vIGNoZWNrIGVhY2ggYW5jZXN0b3JcbiAgICB3aGlsZSAobm9kZSAmJiBub2RlICE9PSBsaW1pdE5vZGUpIHtcblxuICAgICAgLy8gaWYgdGhlcmUncyBhIG1hdGNoLCByZXR1cm4gd2l0aCBpdFxuICAgICAgaWYgKG5vZGUudGFnTmFtZSAmJiBub2RlLnRhZ05hbWUgPT09IHRhZ05hbWUpIHtcbiAgICAgICAgcmV0LnB1c2gobm9kZSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9XG5cbiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGVcbiAgICB9XG5cbiAgICAvLyBubyBtYXRjaGVzXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZ2V0IGh0bWwoKSB7XG4gICAgcmV0dXJuIF8udG9IVE1MKHRoaXMucmFuZ2UuY2xvbmVDb250ZW50cygpKTtcbiAgfVxuXG4gIGdldCBpc0NvbGxhcHNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoKS5pc0NvbGxhcHNlZDtcbiAgfVxuXG4gIGdldCByYW5nZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoKS5nZXRSYW5nZUF0KDApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlbGVjdGlvbjtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==