!function e(t,n,o){function i(s,l){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({"./src/js/editor.js":[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},o=function(e){return e&&(e["default"]||e)},i=o(e("./helpers")),r=o(e("./selection")),s=o(e("./editor-toolbar")),l=function(){function e(t){return"string"==typeof t&&(t=document.querySelectorAll(t)),i.isElement(t)?(this.dom=t,this.dom.setAttribute("contentEditable",!0),this.selection=new r,this.commands={},this.initToolbar(),void this.addEvents()):i.slice.call(t).map(function(t){return new e(t)})}return n(e,null,{execCommand:{value:function(e,t,n){var o=this;t&&this.selection.restore(),i.defer(function(){if(o.commands[e])for(var i,r=o.commands[e][Symbol.iterator]();!(i=r.next()).done;){var s=i.value;s.apply(o,[t,e])}else document.execCommand(e,!1,t);n?(o.selection.collapseToEnd(),o.toolbar.hide()):o.showToolbar()})},writable:!0,enumerable:!0,configurable:!0},registerCommand:{value:function(e){if("string"==typeof e){var t=e,n=arguments[1];(e={})[t]=n}for(var o,r=i.keys(e)[Symbol.iterator]();!(o=r.next()).done;){var t=o.value;this.commands[t]=this.commands[t]||[],this.commands[t].push(e[t])}},writable:!0,enumerable:!0,configurable:!0},unregisterCommand:{value:function(e,t){var n,o;(n=this.commands[e])&&(void 0===t?delete this.commands[e]:-1!==(o=n.indexOf(t))&&(n.splice(o,1),0===n.length&&delete this.commands[e]))},writable:!0,enumerable:!0,configurable:!0},initToolbar:{value:function(){var e=this;this.registerCommand({toggleLink:function(){var e,t=this;(e=this.selection.isWithin("a"))?(e.forEach(i.unwrap),this.selection.restore()):this.selection.contains("a")?this.execCommand("unlink"):this.toolbar.toggleInput("http://...",function(e){t.execCommand("createLink",e,!!e)})},toggleBlock:function(e){this.selection.isWithin(e)?this.execCommand("formatBlock","p"):this.execCommand("formatBlock",e)},toggleTag:function(e){var t;if(t=this.selection.isWithin(e))t.forEach(i.unwrap),this.selection.restore();else if(this.selection.contains(e)){var n=new RegExp("<"+e+"(.*?)>|</"+e+">","g");this.selection.replace(this.selection.html.replace(n,""))}else this.selection.replace("<"+e+">"+this.selection.html+"</"+e+">")}});var t=function(t,n){return function(){return e.execCommand(t,n)}},n=function(t){return function(){return"boolean"==typeof t?t:/a|code/.test(t)?e.selection.contains(t)||e.selection.isWithin(t):/h(2|3)|blockquote/.test(t)?e.selection.isWithin(t):document.queryCommandState(t)}};this.toolbar=new s({onInputCancel:function(){e.selection.restore()},buttons:[{content:"B",action:t("bold"),active:n("bold")},{content:"I",action:t("italic"),active:n("italic")},{content:"A",action:t("toggleLink"),active:n("a")},{content:"H1",action:t("toggleBlock","h2"),active:n("h2")},{content:"H2",action:t("toggleBlock","h3"),active:n("h3")},{content:'"',action:t("toggleBlock","blockquote"),active:n("blockquote")},{content:"&lt;/&gt;",action:t("toggleTag","code"),active:n("code")}]})},writable:!0,enumerable:!0,configurable:!0},addEvents:{value:function(){var e=this;this.dom.addEventListener("mouseup",function(){i.defer(function(){return e.showToolbar()})})},writable:!0,enumerable:!0,configurable:!0},showToolbar:{value:function(){var e,t,n,o={};return this.selection.save(),this.selection.isCollapsed?void this.toolbar.hide():(e=this.selection.getRangeBoundary(),o.x=(e.left+e.right)/2,o.y=window.pageYOffset,this.toolbar.dom.style.display="block",t=this.toolbar.dom.offsetHeight,n=this.toolbar.dom.offsetWidth/2,this.toolbar.dom.style.display="",e.top<t?(this.toolbar.position("bottom"),o.y+=e.bottom):(this.toolbar.position("top"),o.y+=e.top),o.x<n?o.x+=n-o.x:window.innerWidth-i.scrollbarWidth()-o.x<n&&(o.x-=n-(window.innerWidth-o.x-i.scrollbarWidth())),void this.toolbar.show(o.x,o.y))},writable:!0,enumerable:!0,configurable:!0}}),e}();window.Editor=l,t.exports=l},{"./editor-toolbar":"/Users/wilwilsman/Documents/Projects/Editor/src/js/editor-toolbar.js","./helpers":"/Users/wilwilsman/Documents/Projects/Editor/src/js/helpers.js","./selection":"/Users/wilwilsman/Documents/Projects/Editor/src/js/selection.js"}],"/Users/wilwilsman/Documents/Projects/Editor/src/js/editor-toolbar.js":[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},o=function(e){return e&&(e["default"]||e)},i=o(e("./helpers")),r=/(?:^|\s)(pm--(top|bottom|left|right))(?:\s|$)/,s=function(){function e(){var e=void 0===arguments[0]?{}:arguments[0];this.buttons=e.buttons||{},document.body.appendChild(this.build()),this.position(e.position||"top"),this.cancelInput=e.onInputCancel||i.noop,this.hide()}return n(e,null,{show:{value:function(e,t){var n=this;return this.dom.style.display="",this.dom.style.top=t+"px",this.dom.style.left=e+"px",i.defer(function(){return n.dom.classList.add("pm--show")}),this.buttons.forEach(function(e){return e.toggle()}),this},writable:!0,enumerable:!0,configurable:!0},hide:{value:function(){return this.dom.style.display="none",this.dom.style.top=this.dom.style.left="",this.dom.classList.remove("pm--show"),this.toggleInput(!1),this},writable:!0,enumerable:!0,configurable:!0},visible:{get:function(){return this.dom.classList.contains("pm--show")},enumerable:!0,configurable:!0},toggleInput:{value:function(e,t,n,o){var r=this,s=this.dom.firstChild.lastChild,l="block"===s.style.display,a=arguments[arguments.length-1];if(o="boolean"==typeof a?a:void 0,n="function"==typeof t?t:n,n="function"==typeof n?n:void 0,e="string"==typeof e?e:"",t="string"==typeof t?t:"",/left|right/.test(this.position())&&(o=!1),l=void 0===o?l:!o,s.firstChild.setAttribute("placeholder",e),s.firstChild.value=t,l)s.style.display="",s.firstChild.value="",this.inputCallback=i.noop,this.dom.style.width="",this.dom.classList.remove("pm--input");else{this.inputCallback=n||i.noop,this.dom.style.width=this.dom.offsetWidth+"px",s.style.display="block";var c=this.dom.offsetWidth<s.offsetWidth;this.dom.style.width=c?s.offsetWidth+"px":"",i.defer(function(){return r.dom.classList.add("pm--input")})}},writable:!0,enumerable:!0,configurable:!0},position:{value:function(e){var t=r.exec(this.dom.className);return void 0===e?t[2]||null:/top|bottom|left|right/.test(e)?(t&&this.dom.classList.remove(t[1]),this.dom.classList.add("pm--"+e),/left|right/.test(e)&&this.toggleInput(!1),this):!1},writable:!0,enumerable:!0,configurable:!0},build:{value:function(){var e=this,t=document.createElement("div");t.className="pm",t.appendChild(document.createElement("ul")),this.buttons.forEach(function(n,o,i){var r=document.createElement("button");r.setAttribute("type","button"),r.className="pm__btn",0===o?r.classList.add("pm__btn--first"):o===i.length-1&&r.classList.add("pm__btn--last"),r.classList.add(n.className),r.innerHTML=n.content,r.addEventListener("click",n.action.bind(e)),n.element=t.firstChild.appendChild(document.createElement("li")).appendChild(r),n.toggle=function(){r.classList.toggle("active",n.active())}});var n=t.firstChild.appendChild(document.createElement("li")).appendChild(document.createElement("input"));return n.className="pm__control",this.inputCallback=i.noop,n.addEventListener("keyup",function(t){13===(t.which||t.keyCode)&&(e.inputCallback(n.value),e.toggleInput(!1))}),n.parentNode.addEventListener("transitionend",function(){return n.focus()}),n.parentNode.appendChild(document.createElement("div")).className="pm__cancel",n.nextElementSibling.addEventListener("click",function(){e.toggleInput(!1),e.cancelInput()}),this.dom=t},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=s},{"./helpers":"/Users/wilwilsman/Documents/Projects/Editor/src/js/helpers.js"}],"/Users/wilwilsman/Documents/Projects/Editor/src/js/helpers.js":[function(e,t){"use strict";var n,o={slice:Array.prototype.slice,keys:Object.keys,isElement:function(e){return!(!e||1!==e.nodeType)},toHTML:function(e){var t,n=document.createElement("div");e=e.length?o.slice.call(e):[e];for(var i,r=e[Symbol.iterator]();!(i=r.next()).done;){var s=i.value;n.appendChild(s)}return t=n.innerHTML,n=null,t},unwrap:function(e){for(var t,n=e.parentNode,o=document.createDocumentFragment();t=e.firstChild;)o.appendChild(t);return n.insertBefore(o,e),n.removeChild(e),o},closest:function(e,t){for(var n;n=e.parentNode;)if(n===t)return n},getTextNodes:function(e){var t=[];if(3===e.nodeType)t.push(e);else for(var n,i=o.slice.call(e.childNodes),r=i[Symbol.iterator]();!(n=r.next()).done;){var s=n.value;t.push.apply(t,o.getTextNodes(s))}return t},scrollbarWidth:function(){if(n)return n;var e,t,o=document.createElement("div"),i=o.cloneNode();return o.style.visibility="hidden",o.style.width="100px",document.body.appendChild(o),e=o.offsetWidth,o.style.overflow="scroll",i.style.width="100%",o.appendChild(i),t=i.offsetWidth,o.parentNode.removeChild(o),n=e-t},noop:function(){},now:Date.now,delay:function(e,t){var n=o.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},defer:function(e){return o.delay.apply(o,[e,1].concat(o.slice.call(arguments,1)))}};t.exports=o},{}],"/Users/wilwilsman/Documents/Projects/Editor/src/js/selection.js":[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},o=function(e){return e&&(e["default"]||e)},i=o(e("./helpers")),r=function(){function e(){return this.constructor.instance?this.constructor.instance:void(this.constructor.instance=this)}return n(e,null,{get:{value:function(){return window.getSelection()},writable:!0,enumerable:!0,configurable:!0},save:{value:function(){var e=[],t=this.range;e[0]=t.commonAncestorContainer,e[2]=this.getCaretOffset(e[0]),e[1]=e[2]-t.toString().length,this.saved=e},writable:!0,enumerable:!0,configurable:!0},restore:{value:function(){this.select.apply(this,this.saved)},writable:!0,enumerable:!0,configurable:!0},getRangeBoundary:{value:function(){return this.range.getBoundingClientRect()},writable:!0,enumerable:!0,configurable:!0},collapseToEnd:{value:function(){this.get().collapseToEnd()},writable:!0,enumerable:!0,configurable:!0},select:{value:function(e,t,n){var o=this.get(),r=document.createRange();if(r.selectNode(e),void 0!==t&&void 0!==n)for(var s,l=i.getTextNodes(e),a=!1,c=0,u=void 0,d=l[Symbol.iterator]();!(s=d.next()).done;){var h=s.value;if(u=c+h.length,!a&&t>=c&&(u>t||t===u)&&(r.setStart(h,t-c),a=!0),a&&u>=n){r.setEnd(h,n-c);break}c=u}o.removeAllRanges(),o.addRange(r)},writable:!0,enumerable:!0,configurable:!0},replace:{value:function(e){var t,n,o=this.get(),i=this.range,r=i.cloneRange(),s=document.createElement("div"),l=document.createDocumentFragment();for(s.innerHTML=e;t=s.firstChild;)n=l.appendChild(t);i.deleteContents(),i.insertNode(l),n&&(r.setEndAfter(n),o.removeAllRanges(),o.addRange(r))},writable:!0,enumerable:!0,configurable:!0},getCaretOffset:{value:function(e){var t=this.range,n=t.cloneRange();return n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),n.toString().length},writable:!0,enumerable:!0,configurable:!0},contains:{value:function(e){var t=new RegExp("<"+e+"(.*?)>|</"+e+">");return t.test(this.html)},writable:!0,enumerable:!0,configurable:!0},isWithin:{value:function(e,t){var n=[],o=this.range,i=o.startContainer.parentNode,r=o.endContainer.parentNode,s=o.commonAncestorContainer;if(e=e.toUpperCase(),i.tagName===e&&n.push(i),r!==i&&r.tagName===e&&n.push(r),n.length>0)return n;for(t=void 0===t?document.body:t;s&&s!==t;){if(s.tagName&&s.tagName===e)return n.push(s),n;s=s.parentNode}return!1},writable:!0,enumerable:!0,configurable:!0},html:{get:function(){return i.toHTML(this.range.cloneContents())},enumerable:!0,configurable:!0},isCollapsed:{get:function(){return this.get().isCollapsed},enumerable:!0,configurable:!0},range:{get:function(){return this.get().getRangeAt(0)},enumerable:!0,configurable:!0}}),e}();t.exports=r},{"./helpers":"/Users/wilwilsman/Documents/Projects/Editor/src/js/helpers.js"}]},{},["./src/js/editor.js"]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJlZGl0b3IuanMiLCJzcmMvanMvZWRpdG9yLmpzIiwic3JjL2pzL2VkaXRvci10b29sYmFyLmpzIiwic3JjL2pzL2hlbHBlcnMuanMiLCJzcmMvanMvc2VsZWN0aW9uLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiLi9zcmMvanMvZWRpdG9yLmpzIiwibW9kdWxlIiwiX3Byb3RvdHlwZVByb3BlcnRpZXMiLCJjaGlsZCIsInN0YXRpY1Byb3BzIiwiaW5zdGFuY2VQcm9wcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnRpZXMiLCJwcm90b3R5cGUiLCJfaW50ZXJvcFJlcXVpcmUiLCJvYmoiLCJfIiwiU2VsZWN0aW9uIiwiRWRpdG9yVG9vbGJhciIsIkVkaXRvciIsImVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXNFbGVtZW50IiwidGhpcyIsImRvbSIsInNldEF0dHJpYnV0ZSIsInNlbGVjdGlvbiIsImNvbW1hbmRzIiwiaW5pdFRvb2xiYXIiLCJhZGRFdmVudHMiLCJzbGljZSIsIm1hcCIsImV4ZWNDb21tYW5kIiwidmFsdWUiLCJjbWQiLCJjb2xsYXBzZSIsIl90aGlzIiwicmVzdG9yZSIsImRlZmVyIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiZnVuYyIsImFwcGx5IiwiY29sbGFwc2VUb0VuZCIsInRvb2xiYXIiLCJoaWRlIiwic2hvd1Rvb2xiYXIiLCJ3cml0YWJsZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJyZWdpc3RlckNvbW1hbmQiLCJjbWRzIiwiYXJndW1lbnRzIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImtleXMiLCJwdXNoIiwidW5yZWdpc3RlckNvbW1hbmQiLCJpbmRleCIsInVuZGVmaW5lZCIsImluZGV4T2YiLCJzcGxpY2UiLCJfdGhpczIiLCJ0b2dnbGVMaW5rIiwiZWxzIiwiX3RoaXMzIiwiaXNXaXRoaW4iLCJmb3JFYWNoIiwidW53cmFwIiwiY29udGFpbnMiLCJ0b2dnbGVJbnB1dCIsInRvZ2dsZUJsb2NrIiwidGFnTmFtZSIsInRvZ2dsZVRhZyIsInJlZyIsIlJlZ0V4cCIsInJlcGxhY2UiLCJodG1sIiwiY29tbWFuZFdyYXBwZXIiLCJxdWVyeVdyYXBwZXIiLCJxdWVyeSIsInRlc3QiLCJxdWVyeUNvbW1hbmRTdGF0ZSIsIm9uSW5wdXRDYW5jZWwiLCJidXR0b25zIiwiY29udGVudCIsImFjdGlvbiIsImFjdGl2ZSIsIl90aGlzNCIsImFkZEV2ZW50TGlzdGVuZXIiLCJib3VuZGFyeSIsInRvb2xiYXJIZWlnaHQiLCJ0b29sYmFySGFsZldpZHRoIiwicG9pbnQiLCJzYXZlIiwiaXNDb2xsYXBzZWQiLCJnZXRSYW5nZUJvdW5kYXJ5IiwieCIsImxlZnQiLCJyaWdodCIsInkiLCJ3aW5kb3ciLCJwYWdlWU9mZnNldCIsInN0eWxlIiwiZGlzcGxheSIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwidG9wIiwicG9zaXRpb24iLCJib3R0b20iLCJpbm5lcldpZHRoIiwic2Nyb2xsYmFyV2lkdGgiLCJzaG93IiwiLi9lZGl0b3ItdG9vbGJhciIsIi4vaGVscGVycyIsIi4vc2VsZWN0aW9uIiwiL1VzZXJzL3dpbHdpbHNtYW4vRG9jdW1lbnRzL1Byb2plY3RzL0VkaXRvci9zcmMvanMvZWRpdG9yLXRvb2xiYXIuanMiLCJESVJSRUciLCJvcHRzIiwiYm9keSIsImFwcGVuZENoaWxkIiwiYnVpbGQiLCJjYW5jZWxJbnB1dCIsIm5vb3AiLCJjbGFzc0xpc3QiLCJhZGQiLCJidG4iLCJ0b2dnbGUiLCJyZW1vdmUiLCJ2aXNpYmxlIiwiZ2V0IiwicGxhY2Vob2xkZXIiLCJjYWxsYmFjayIsImZvcmNlIiwiY3RybCIsImZpcnN0Q2hpbGQiLCJsYXN0Q2hpbGQiLCJsYXN0QXJnIiwiaW5wdXRDYWxsYmFjayIsIndpZHRoIiwiYmlnZ2VySW5wdXQiLCJkaXIiLCJvbGRkaXIiLCJleGVjIiwiY2xhc3NOYW1lIiwiY3JlYXRlRWxlbWVudCIsImJ0bnMiLCJlbGVtZW50IiwiaW5uZXJIVE1MIiwiYmluZCIsImlucHV0IiwiZXZlbnQiLCJ3aGljaCIsImtleUNvZGUiLCJwYXJlbnROb2RlIiwiZm9jdXMiLCJuZXh0RWxlbWVudFNpYmxpbmciLCIvVXNlcnMvd2lsd2lsc21hbi9Eb2N1bWVudHMvUHJvamVjdHMvRWRpdG9yL3NyYy9qcy9oZWxwZXJzLmpzIiwiQXJyYXkiLCJub2RlVHlwZSIsInRvSFRNTCIsInRlbXAiLCJub2RlIiwicGFyZW50IiwiZnJhZyIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpbnNlcnRCZWZvcmUiLCJyZW1vdmVDaGlsZCIsImNsb3Nlc3QiLCJnZXRUZXh0Tm9kZXMiLCJub2RlcyIsImNoaWxkcmVuIiwiY2hpbGROb2RlcyIsIndpZHRoTm9TY3JvbGwiLCJ3aWR0aFdpdGhTY3JvbGwiLCJvdXRlciIsImlubmVyIiwiY2xvbmVOb2RlIiwidmlzaWJpbGl0eSIsIm92ZXJmbG93Iiwibm93IiwiRGF0ZSIsImRlbGF5IiwiZm4iLCJ3YWl0IiwiYXJncyIsInNldFRpbWVvdXQiLCJjb25jYXQiLCIvVXNlcnMvd2lsd2lsc21hbi9Eb2N1bWVudHMvUHJvamVjdHMvRWRpdG9yL3NyYy9qcy9zZWxlY3Rpb24uanMiLCJjb25zdHJ1Y3RvciIsImluc3RhbmNlIiwiZ2V0U2VsZWN0aW9uIiwic2F2ZWQiLCJyYW5nZSIsImNvbW1vbkFuY2VzdG9yQ29udGFpbmVyIiwiZ2V0Q2FyZXRPZmZzZXQiLCJ0b1N0cmluZyIsInNlbGVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInN0YXJ0IiwiZW5kIiwiY3JlYXRlUmFuZ2UiLCJzZWxlY3ROb2RlIiwidGV4dE5vZGVzIiwiZm91bmRTdGFydCIsImNoYXJDb3VudCIsImVuZENoYXJDb3VudCIsInRleHROb2RlIiwic2V0U3RhcnQiLCJzZXRFbmQiLCJyZW1vdmVBbGxSYW5nZXMiLCJhZGRSYW5nZSIsImxhc3ROb2RlIiwiZXhwYW5kZWRSYW5nZSIsImNsb25lUmFuZ2UiLCJkZWxldGVDb250ZW50cyIsImluc2VydE5vZGUiLCJzZXRFbmRBZnRlciIsInByZUNhcmV0UmFuZ2UiLCJzZWxlY3ROb2RlQ29udGVudHMiLCJlbmRDb250YWluZXIiLCJlbmRPZmZzZXQiLCJ0YWdSZWciLCJsaW1pdE5vZGUiLCJyZXQiLCJzdGFydFBhcmVudCIsInN0YXJ0Q29udGFpbmVyIiwiZW5kUGFyZW50IiwidG9VcHBlckNhc2UiLCJjbG9uZUNvbnRlbnRzIiwiZ2V0UmFuZ2VBdCJdLCJtYXBwaW5ncyI6IkNBQUEsUUFBQUEsR0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUFBLElBQUFKLEVBQUFHLEdBQUEsQ0FBQSxJQUFBSixFQUFBSSxHQUFBLENBQUEsR0FBQUUsR0FBQSxrQkFBQUMsVUFBQUEsT0FBQSxLQUFBRixHQUFBQyxFQUFBLE1BQUFBLEdBQUFGLEdBQUEsRUFBQSxJQUFBSSxFQUFBLE1BQUFBLEdBQUFKLEdBQUEsRUFBQSxJQUFBSyxHQUFBLEdBQUFDLE9BQUEsdUJBQUFOLEVBQUEsSUFBQSxNQUFBSyxHQUFBRSxLQUFBLG1CQUFBRixFQUFBLEdBQUFHLEdBQUFYLEVBQUFHLElBQUFTLFdBQUFiLEdBQUFJLEdBQUEsR0FBQVUsS0FBQUYsRUFBQUMsUUFBQSxTQUFBZCxHQUFBLEdBQUFFLEdBQUFELEVBQUFJLEdBQUEsR0FBQUwsRUFBQSxPQUFBSSxHQUFBRixFQUFBQSxFQUFBRixJQUFBYSxFQUFBQSxFQUFBQyxRQUFBZCxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLE1BQUFELEdBQUFHLEdBQUFTLFFBQUEsSUFBQSxHQUFBTCxHQUFBLGtCQUFBRCxVQUFBQSxRQUFBSCxFQUFBLEVBQUFBLEVBQUFGLEVBQUFh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RixFQUFLMUYsVUFBWUEsRUFFbkMsTUFEQXdKLEdBQUl4SyxLQUFLMEcsR0FDRjhELENBR1Q5RCxHQUFPQSxFQUFLUixXQUlkLE9BQU8sR0oydUJMM0csVUFBVSxFQUNWQyxZQUFZLEVBQ1pDLGNBQWMsR0kxdUJkNEIsTUo2dUJBcUQsSUk3dUJJLFdBQ04sTUFBT3ZILEdBQUVxSixPQUFPN0ksS0FBSzhLLE1BQU1vQyxrQkordUJ6QnJMLFlBQVksRUFDWkMsY0FBYyxHSTd1QmQ4QyxhSmd2QkFtQyxJSWh2QlcsV0FDYixNQUFPL0csTUFBSytHLE1BQU1uQyxhSmt2QmhCL0MsWUFBWSxFQUNaQyxjQUFjLEdJaHZCZGdKLE9KbXZCQS9ELElJbnZCSyxXQUNQLE1BQU8vRyxNQUFLK0csTUFBTW9HLFdBQVcsSUpxdkIzQnRMLFlBQVksRUFDWkMsY0FBYyxLSXg1QmRyQyxJSis1Qk5YLEdBQU9KLFFJenZCUWUsSUoydkJac0csWUFBWSx1RUFBdUUiLCJmaWxlIjoiZWRpdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLG51bGwsImltcG9ydCBfIGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgU2VsZWN0aW9uIGZyb20gJy4vc2VsZWN0aW9uJztcbmltcG9ydCBFZGl0b3JUb29sYmFyIGZyb20gJy4vZWRpdG9yLXRvb2xiYXInO1xuXG5jbGFzcyBFZGl0b3Ige1xuICBjb25zdHJ1Y3RvcihlbCkge1xuICAgIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWwpO1xuICAgIH1cblxuICAgIGlmICghXy5pc0VsZW1lbnQoZWwpKSB7XG4gICAgICByZXR1cm4gXy5zbGljZS5jYWxsKGVsKS5tYXAoZSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yKGUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5kb20gPSBlbDtcbiAgICB0aGlzLmRvbS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRFZGl0YWJsZScsIHRydWUpO1xuICAgIHRoaXMuc2VsZWN0aW9uID0gbmV3IFNlbGVjdGlvbigpO1xuICAgIHRoaXMuY29tbWFuZHMgPSB7fTtcbiAgICB0aGlzLmluaXRUb29sYmFyKCk7XG4gICAgdGhpcy5hZGRFdmVudHMoKTtcbiAgfVxuXG4gIGV4ZWNDb21tYW5kKGNtZCwgdmFsdWUsIGNvbGxhcHNlKSB7XG5cbiAgICAvLyBpZiBjb21tYW5kIHJlcXVpcmVzIGlucHV0LCByZXN0b3JlIHNlbGVjdGlvbiBmaXJzdFxuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5zZWxlY3Rpb24ucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIC8vIGRlZmVyIGNvbW1hbmQgdG8gd2FpdCBmb3Igc2VsZWN0aW9uIHRvIHJlc3RvcmVcbiAgICBfLmRlZmVyKCgpID0+IHtcblxuICAgICAgLy8gY2FsbCBjdXN0b20gY29tbWFuZHNcbiAgICAgIGlmICh0aGlzLmNvbW1hbmRzW2NtZF0pIHtcbiAgICAgICAgZm9yIChsZXQgZnVuYyBvZiB0aGlzLmNvbW1hbmRzW2NtZF0pIHtcbiAgICAgICAgICBmdW5jLmFwcGx5KHRoaXMsIFt2YWx1ZSwgY21kXSk7XG4gICAgICAgIH1cblxuICAgICAgLy8gYGRvY3VtZW50LmV4ZWNDb21tYW5kYCBieSBkZWZhdWx0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZChjbWQsIGZhbHNlLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbGxhcHNlIHNlbGVjdGlvbiBhbmQgaGlkZSB0b29sYmFyXG4gICAgICBpZiAoY29sbGFwc2UpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24uY29sbGFwc2VUb0VuZCgpO1xuICAgICAgICB0aGlzLnRvb2xiYXIuaGlkZSgpO1xuXG4gICAgICAvLyByZXBvc2l0aW9uIHRoZSB0b29sYmFyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNob3dUb29sYmFyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZWdpc3RlckNvbW1hbmQoY21kcy8qLCBmdW5jKi8pIHtcblxuICAgIC8vIGlmIGBjbWRzYCBpcyBhIGEgc3RyaW5nLCB0dXJuIGFyZ3VtZW50cyBpbnRvIGFuIG9iamVjdFxuICAgIGlmICh0eXBlb2YgY21kcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGxldCBjbWQgPSBjbWRzLCBmdW5jID0gYXJndW1lbnRzWzFdO1xuICAgICAgKGNtZHMgPSB7fSlbY21kXSA9IGZ1bmM7XG4gICAgfVxuXG4gICAgLy8gYWRkIGNvbW1hbmRzXG4gICAgZm9yIChsZXQgY21kIG9mIF8ua2V5cyhjbWRzKSkge1xuICAgICAgdGhpcy5jb21tYW5kc1tjbWRdID0gdGhpcy5jb21tYW5kc1tjbWRdIHx8IFtdO1xuICAgICAgdGhpcy5jb21tYW5kc1tjbWRdLnB1c2goY21kc1tjbWRdKTtcbiAgICB9XG4gIH1cblxuICB1bnJlZ2lzdGVyQ29tbWFuZChjbWQsIGZ1bmMpIHtcbiAgICB2YXIgY21kcywgaW5kZXg7XG5cbiAgICBpZiAoY21kcyA9IHRoaXMuY29tbWFuZHNbY21kXSkge1xuXG4gICAgICAvLyBkZWxldGUgYWxsIGlmIGBmdW5jYCBub3QgcGFzc2VkXG4gICAgICBpZiAoZnVuYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNvbW1hbmRzW2NtZF07XG5cbiAgICAgIC8vIGRlbGV0ZSBzcGVjaWZpYyBmdW5jdGlvbiBpZiBpdCBleGlzdHNcbiAgICAgIH0gZWxzZSBpZiAoKGluZGV4ID0gY21kcy5pbmRleE9mKGZ1bmMpKSAhPT0gLTEpIHtcbiAgICAgICAgY21kcy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgICAgIC8vIHJlbW92ZSBmcm9tIGBjb21tYW5kc2AgaWYgZW1wdHlcbiAgICAgICAgaWYgKGNtZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuY29tbWFuZHNbY21kXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGluaXRUb29sYmFyKG9wdHMpIHtcbiAgICAvLyB0ZXN0aW5nXG5cbiAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZCh7XG5cbiAgICAgIC8vIHRvZ2dsZSBsaW5rIGFjdGlvblxuICAgICAgJ3RvZ2dsZUxpbmsnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbHM7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGNsb3Nlc3QgbGlua1xuICAgICAgICBpZiAoKGVscyA9IHRoaXMuc2VsZWN0aW9uLmlzV2l0aGluKCdhJykpKSB7XG4gICAgICAgICAgZWxzLmZvckVhY2goXy51bndyYXApO1xuICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnJlc3RvcmUoKTtcblxuICAgICAgICAvLyB1bmxpbmsgc2VsZWN0ZWQgbGlua1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0aW9uLmNvbnRhaW5zKCdhJykpIHtcbiAgICAgICAgICB0aGlzLmV4ZWNDb21tYW5kKCd1bmxpbmsnKTtcblxuICAgICAgICAvLyBzaG93IGlucHV0IHRvIGNyZWF0ZSBsaW5rXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50b29sYmFyLnRvZ2dsZUlucHV0KCdodHRwOi8vLi4uJywgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV4ZWNDb21tYW5kKCdjcmVhdGVMaW5rJywgdmFsdWUsICEhdmFsdWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAndG9nZ2xlQmxvY2snOiBmdW5jdGlvbiAodGFnTmFtZSkge1xuXG4gICAgICAgIC8vIGZvcm1hdCBhcyBwYXJhZ3JhcGhcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uLmlzV2l0aGluKHRhZ05hbWUpKSB7XG4gICAgICAgICAgdGhpcy5leGVjQ29tbWFuZCgnZm9ybWF0QmxvY2snLCAncCcpO1xuXG4gICAgICAgIC8vIGZvcm1hdCBhcyBgdGFnTmFtZWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmV4ZWNDb21tYW5kKCdmb3JtYXRCbG9jaycsIHRhZ05hbWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAndG9nZ2xlVGFnJzogZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgICAgdmFyIGVscztcblxuICAgICAgICAvLyByZW1vdmUgY2xvc2VzdCBtYXRjaGluZyB0YWdcbiAgICAgICAgaWYgKChlbHMgPSB0aGlzLnNlbGVjdGlvbi5pc1dpdGhpbih0YWdOYW1lKSkpIHtcbiAgICAgICAgICAvLyBUT0RPOiBcbiAgICAgICAgICAvLyAgIEluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZSB0YWcsIGJyZWFrIHNlbGVjdGlvbiBvdXQgb2YgdGFnIGxpa2UgXG4gICAgICAgICAgLy8gICBib2xkL2l0YWxpYyBkZWZhdWx0IGJlaGF2aW9yLlxuICAgICAgICAgIGVscy5mb3JFYWNoKF8udW53cmFwKTtcbiAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5yZXN0b3JlKCk7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGlubmVyIHRhZ3NcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGlvbi5jb250YWlucyh0YWdOYW1lKSkge1xuICAgICAgICAgIGxldCByZWcgPSBuZXcgUmVnRXhwKCc8JyArIHRhZ05hbWUgKyAnKC4qPyk+fDwvJyArIHRhZ05hbWUgKyAnPicsICdnJyk7XG4gICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucmVwbGFjZSh0aGlzLnNlbGVjdGlvbi5odG1sLnJlcGxhY2UocmVnLCAnJykpO1xuXG4gICAgICAgIC8vIHdyYXAgd2l0aCB0YWdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5yZXBsYWNlKGA8JHt0YWdOYW1lfT4ke3RoaXMuc2VsZWN0aW9uLmh0bWx9PC8ke3RhZ05hbWV9PmApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgY29tbWFuZFdyYXBwZXIgPSAoY21kLCB2YWx1ZSkgPT4ge1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhlY0NvbW1hbmQoY21kLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgcXVlcnlXcmFwcGVyID0gcXVlcnkgPT4ge1xuICAgICAgcmV0dXJuICgpID0+IHtcblxuICAgICAgICAvLyBmb3JjZSBhY3RpdmUgc3RhdGVcbiAgICAgICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGlua3MgJiBjb2RlXG4gICAgICAgIGlmICgvYXxjb2RlLy50ZXN0KHF1ZXJ5KSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbi5jb250YWlucyhxdWVyeSkgfHwgXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5pc1dpdGhpbihxdWVyeSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBoZWFkaW5ncyAmIGJsb2NrcXVvdGVcbiAgICAgICAgaWYgKC9oKDJ8Myl8YmxvY2txdW90ZS8udGVzdChxdWVyeSkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb24uaXNXaXRoaW4ocXVlcnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZGVmYXVsdFxuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUocXVlcnkpO1xuICAgICAgfTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMudG9vbGJhciA9IG5ldyBFZGl0b3JUb29sYmFyKHtcbiAgICAgIG9uSW5wdXRDYW5jZWw6ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24ucmVzdG9yZSgpO1xuICAgICAgfSxcblxuICAgICAgYnV0dG9uczogW3tcbiAgICAgICAgY29udGVudDogJ0InLFxuICAgICAgICBhY3Rpb246IGNvbW1hbmRXcmFwcGVyKCdib2xkJyksXG4gICAgICAgIGFjdGl2ZTogcXVlcnlXcmFwcGVyKCdib2xkJylcbiAgICAgIH0sIHtcbiAgICAgICAgY29udGVudDogJ0knLFxuICAgICAgICBhY3Rpb246IGNvbW1hbmRXcmFwcGVyKCdpdGFsaWMnKSxcbiAgICAgICAgYWN0aXZlOiBxdWVyeVdyYXBwZXIoJ2l0YWxpYycpXG4gICAgICB9LCB7XG4gICAgICAgIGNvbnRlbnQ6ICdBJyxcbiAgICAgICAgYWN0aW9uOiBjb21tYW5kV3JhcHBlcigndG9nZ2xlTGluaycpLFxuICAgICAgICBhY3RpdmU6IHF1ZXJ5V3JhcHBlcignYScpXG4gICAgICB9LCB7XG4gICAgICAgIGNvbnRlbnQ6ICdIMScsXG4gICAgICAgIGFjdGlvbjogY29tbWFuZFdyYXBwZXIoJ3RvZ2dsZUJsb2NrJywgJ2gyJyksXG4gICAgICAgIGFjdGl2ZTogcXVlcnlXcmFwcGVyKCdoMicpXG4gICAgICB9LCB7XG4gICAgICAgIGNvbnRlbnQ6ICdIMicsXG4gICAgICAgIGFjdGlvbjogY29tbWFuZFdyYXBwZXIoJ3RvZ2dsZUJsb2NrJywgJ2gzJyksXG4gICAgICAgIGFjdGl2ZTogcXVlcnlXcmFwcGVyKCdoMycpXG4gICAgICB9LCB7XG4gICAgICAgIGNvbnRlbnQ6ICdcIicsXG4gICAgICAgIGFjdGlvbjogY29tbWFuZFdyYXBwZXIoJ3RvZ2dsZUJsb2NrJywgJ2Jsb2NrcXVvdGUnKSxcbiAgICAgICAgYWN0aXZlOiBxdWVyeVdyYXBwZXIoJ2Jsb2NrcXVvdGUnKVxuICAgICAgfSwge1xuICAgICAgICBjb250ZW50OiAnJmx0Oy8mZ3Q7JyxcbiAgICAgICAgYWN0aW9uOiBjb21tYW5kV3JhcHBlcigndG9nZ2xlVGFnJywgJ2NvZGUnKSxcbiAgICAgICAgYWN0aXZlOiBxdWVyeVdyYXBwZXIoJ2NvZGUnKVxuICAgICAgfV1cbiAgICB9KTtcbiAgfVxuXG4gIGFkZEV2ZW50cygpIHtcbiAgICB0aGlzLmRvbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKCkgPT4ge1xuICAgICAgXy5kZWZlcigoKSA9PiB0aGlzLnNob3dUb29sYmFyKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgc2hvd1Rvb2xiYXIoKSB7XG4gICAgdmFyIGJvdW5kYXJ5LCB0b29sYmFySGVpZ2h0LCB0b29sYmFySGFsZldpZHRoLFxuICAgICAgcG9pbnQgPSB7fTtcblxuICAgIHRoaXMuc2VsZWN0aW9uLnNhdmUoKTtcbiAgICBcbiAgICBpZiAodGhpcy5zZWxlY3Rpb24uaXNDb2xsYXBzZWQpIHtcbiAgICAgIHRoaXMudG9vbGJhci5oaWRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYm91bmRhcnkgPSB0aGlzLnNlbGVjdGlvbi5nZXRSYW5nZUJvdW5kYXJ5KCk7XG4gICAgcG9pbnQueCA9IChib3VuZGFyeS5sZWZ0ICsgYm91bmRhcnkucmlnaHQpIC8gMjtcbiAgICBwb2ludC55ID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuXG4gICAgdGhpcy50b29sYmFyLmRvbS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0b29sYmFySGVpZ2h0ID0gdGhpcy50b29sYmFyLmRvbS5vZmZzZXRIZWlnaHQ7XG4gICAgdG9vbGJhckhhbGZXaWR0aCA9IHRoaXMudG9vbGJhci5kb20ub2Zmc2V0V2lkdGggLyAyO1xuICAgIHRoaXMudG9vbGJhci5kb20uc3R5bGUuZGlzcGxheSA9ICcnO1xuXG4gICAgLy8gY2VudGVyIGZvY3VzIHVuZGVyIHNlbGVjdGlvblxuICAgIGlmIChib3VuZGFyeS50b3AgPCB0b29sYmFySGVpZ2h0KSB7XG4gICAgICB0aGlzLnRvb2xiYXIucG9zaXRpb24oJ2JvdHRvbScpO1xuICAgICAgcG9pbnQueSArPSBib3VuZGFyeS5ib3R0b207XG5cbiAgICAvLyBjZW50ZXIgZm9jdXMgYWJvdmUgc2VsZWN0aW9uXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudG9vbGJhci5wb3NpdGlvbigndG9wJyk7XG4gICAgICBwb2ludC55ICs9IGJvdW5kYXJ5LnRvcDtcbiAgICB9XG5cbiAgICAvLyBzbmFwIHRvIGxlZnQgZWRnZVxuICAgIGlmIChwb2ludC54IDwgdG9vbGJhckhhbGZXaWR0aCkge1xuICAgICAgcG9pbnQueCArPSB0b29sYmFySGFsZldpZHRoIC0gcG9pbnQueDtcblxuICAgIC8vIHNuYXAgdG8gcmlnaHQgZWRnZSAoYWRqdXN0ZWQgZm9yIHNjcm9sbGJhcilcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5pbm5lcldpZHRoIC0gXy5zY3JvbGxiYXJXaWR0aCgpIC0gcG9pbnQueCA8IHRvb2xiYXJIYWxmV2lkdGgpIHtcbiAgICAgIHBvaW50LnggLT0gdG9vbGJhckhhbGZXaWR0aCAtICh3aW5kb3cuaW5uZXJXaWR0aCAtIHBvaW50LnggLSBfLnNjcm9sbGJhcldpZHRoKCkpO1xuXG4gICAgfVxuXG4gICAgdGhpcy50b29sYmFyLnNob3cocG9pbnQueCwgcG9pbnQueSk7XG4gIH1cbn1cblxud2luZG93LkVkaXRvciA9IEVkaXRvcjtcblxuZXhwb3J0IGRlZmF1bHQgRWRpdG9yO1xuIiwiaW1wb3J0IF8gZnJvbSAnLi9oZWxwZXJzJztcblxuY29uc3QgRElSUkVHID0gLyg/Ol58XFxzKShwbS0tKHRvcHxib3R0b218bGVmdHxyaWdodCkpKD86XFxzfCQpLztcblxuY2xhc3MgRWRpdG9yVG9vbGJhciB7XG4gIGNvbnN0cnVjdG9yKG9wdHMgPSB7fSkge1xuXG4gICAgdGhpcy5idXR0b25zID0gb3B0cy5idXR0b25zIHx8IHt9O1xuICAgIFxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5idWlsZCgpKTtcblxuICAgIHRoaXMucG9zaXRpb24ob3B0cy5wb3NpdGlvbiB8fCAndG9wJyk7XG4gICAgdGhpcy5jYW5jZWxJbnB1dCA9IG9wdHMub25JbnB1dENhbmNlbCB8fCBfLm5vb3A7XG5cbiAgICB0aGlzLmhpZGUoKTtcbiAgfVxuXG4gIHNob3coeCwgeSkge1xuXG4gICAgdGhpcy5kb20uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgIHRoaXMuZG9tLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xuICAgIHRoaXMuZG9tLnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcblxuICAgIC8vIHByZXZlbnQgYW5pbWF0aW9uIGZyb20gbm90IHJ1bm5pbmdcbiAgICBfLmRlZmVyKCgpID0+IHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQoJ3BtLS1zaG93JykpO1xuXG4gICAgLy8gY2hlY2sgaWYgYnV0dG9ucyBzaG91bGQgYmUgYWN0aXZlXG4gICAgdGhpcy5idXR0b25zLmZvckVhY2goYnRuID0+IGJ0bi50b2dnbGUoKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5kb20uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLmRvbS5zdHlsZS50b3AgPSB0aGlzLmRvbS5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgdGhpcy5kb20uY2xhc3NMaXN0LnJlbW92ZSgncG0tLXNob3cnKTtcbiAgICB0aGlzLnRvZ2dsZUlucHV0KGZhbHNlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldCB2aXNpYmxlKCkge1xuICAgIHJldHVybiB0aGlzLmRvbS5jbGFzc0xpc3QuY29udGFpbnMoJ3BtLS1zaG93Jyk7XG4gIH1cblxuICB0b2dnbGVJbnB1dChwbGFjZWhvbGRlciwgdmFsdWUsIGNhbGxiYWNrLCBmb3JjZSkge1xuICAgIHZhciBjdHJsID0gdGhpcy5kb20uZmlyc3RDaGlsZC5sYXN0Q2hpbGQsXG4gICAgICB2aXNpYmxlID0gY3RybC5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snO1xuXG4gICAgLy8gYGZvcmNlYCBhcmd1bWVudCBhbHdheXMgY29tZXMgbGFzdFxuICAgIGxldCBsYXN0QXJnID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTtcbiAgICBmb3JjZSA9IHR5cGVvZiBsYXN0QXJnID09PSAnYm9vbGVhbicgPyBsYXN0QXJnIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gYGNhbGxiYWNrYCBjYW4gc29tZXRpbWVzIGJlIHNlY29uZCBhcmd1bWVudFxuICAgIGNhbGxiYWNrID0gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID8gdmFsdWUgOiBjYWxsYmFjaztcbiAgICBjYWxsYmFjayA9IHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gYHBsYWNlaG9sZGVyYCBhbmQgYHZhbHVlYCBtdXN0IGJlIHN0cmluZ3NcbiAgICBwbGFjZWhvbGRlciA9IHR5cGVvZiBwbGFjZWhvbGRlciA9PT0gJ3N0cmluZycgPyBwbGFjZWhvbGRlciA6ICcnO1xuICAgIHZhbHVlID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogJyc7XG5cbiAgICAvLyBjYW5ub3Qgc2hvdyBpbnB1dCB3aGVuIHRvb2xiYXIgaXMgdG8gbGVmdCBvciByaWdodFxuICAgIGlmICgvbGVmdHxyaWdodC8udGVzdCh0aGlzLnBvc2l0aW9uKCkpKSB7XG4gICAgICBmb3JjZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIG92ZXJyaWRlIGB2aXNpYmxlYCB3aGVuIGZvcmNlZFxuICAgIHZpc2libGUgPSB1bmRlZmluZWQgPT09IGZvcmNlID8gdmlzaWJsZSA6ICFmb3JjZTtcblxuICAgIC8vIHNldCBwcm9wZXJ0aWVzXG4gICAgY3RybC5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCBwbGFjZWhvbGRlcik7XG4gICAgY3RybC5maXJzdENoaWxkLnZhbHVlID0gdmFsdWU7XG5cbiAgICAvLyBub3QgdmlzaWJsZVxuICAgIGlmICghdmlzaWJsZSkge1xuICAgICAgdGhpcy5pbnB1dENhbGxiYWNrID0gY2FsbGJhY2sgfHwgXy5ub29wO1xuXG4gICAgICAvLyBzZXQgZXhwbGljaXQgd2lkdGggZm9yIHRyYW5zaXRpb25cbiAgICAgIHRoaXMuZG9tLnN0eWxlLndpZHRoID0gdGhpcy5kb20ub2Zmc2V0V2lkdGggKyAncHgnO1xuXG4gICAgICAvLyBzaG93IGlucHV0IHdpdGggcHJvcGVyIHdpZHRoXG4gICAgICBjdHJsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICBsZXQgYmlnZ2VySW5wdXQgPSB0aGlzLmRvbS5vZmZzZXRXaWR0aCA8IGN0cmwub2Zmc2V0V2lkdGg7XG4gICAgICB0aGlzLmRvbS5zdHlsZS53aWR0aCA9IGJpZ2dlcklucHV0ID8gY3RybC5vZmZzZXRXaWR0aCArICdweCcgOiAnJztcblxuICAgICAgLy8gcHJldmVudCBhbmltYXRpb24gZnJvbSBub3QgcnVubmluZ1xuICAgICAgXy5kZWZlcigoKSA9PiB0aGlzLmRvbS5jbGFzc0xpc3QuYWRkKCdwbS0taW5wdXQnKSk7XG5cbiAgICAvLyB2aXNpYmxlXG4gICAgfSBlbHNlIHtcbiAgICAgIFxuICAgICAgLy8gcmVzZXQgZXZlcnl0aGluZ1xuICAgICAgY3RybC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICBjdHJsLmZpcnN0Q2hpbGQudmFsdWUgPSAnJztcbiAgICAgIHRoaXMuaW5wdXRDYWxsYmFjayA9IF8ubm9vcDtcbiAgICAgIHRoaXMuZG9tLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICB0aGlzLmRvbS5jbGFzc0xpc3QucmVtb3ZlKCdwbS0taW5wdXQnKTtcbiAgICB9XG4gIH1cblxuICBwb3NpdGlvbihkaXIpIHtcbiAgICB2YXIgb2xkZGlyID0gRElSUkVHLmV4ZWModGhpcy5kb20uY2xhc3NOYW1lKTtcblxuICAgIC8vIG5vIGFyZ3VtZW50czsgcmV0dXJuIGN1cnJlbnQgcG9zaXRpb25cbiAgICBpZiAodW5kZWZpbmVkID09PSBkaXIpIHsgXG4gICAgICByZXR1cm4gb2xkZGlyWzJdIHx8IG51bGw7IFxuICAgIH1cblxuICAgIC8vIHVucmVjb2duaXplZCBkaXJlY3Rpb25cbiAgICBpZiAoIS90b3B8Ym90dG9tfGxlZnR8cmlnaHQvLnRlc3QoZGlyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyByZW1vdmUgb2xkIGRpcmVjdGlvblxuICAgIGlmIChvbGRkaXIpIHtcbiAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5yZW1vdmUob2xkZGlyWzFdKTtcbiAgICB9XG5cbiAgICAvLyBhZGQgbmV3IGRpcmVjdGlvblxuICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQoJ3BtLS0nICsgZGlyKTtcbiAgICBcbiAgICAvLyBpbnB1dCBpcyBkaXNhYmxlZCBmb3IgbGVmdCBhbmQgcmlnaHQgcG9zaXRpb25lZFxuICAgIGlmICgvbGVmdHxyaWdodC8udGVzdChkaXIpKSB7XG4gICAgICB0aGlzLnRvZ2dsZUlucHV0KGZhbHNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGJ1aWxkKCkge1xuICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkb20uY2xhc3NOYW1lID0gJ3BtJztcblxuICAgIC8vIGFkZCBsaXN0IGVsZW1lbnRcbiAgICBkb20uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKSk7XG4gICAgXG4gICAgLy8gYWRkIGVhY2ggYnV0dG9uIGFuZCBhdHRhdGNoIGV2ZW50c1xuICAgIHRoaXMuYnV0dG9ucy5mb3JFYWNoKChidG4sIGksIGJ0bnMpID0+IHtcbiAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gJ3BtX19idG4nO1xuXG4gICAgICAvLyBhZGQgc3BlY2lhbCBjbGFzcyB0byBmaXJzdCBhbmQgbGFzdCBidXR0b25cbiAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG1fX2J0bi0tZmlyc3QnKTtcbiAgICAgIH0gZWxzZSBpZiAoaSA9PT0gYnRucy5sZW5ndGggLSAxKSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG1fX2J0bi0tbGFzdCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBjdXN0b21pemUgYnV0dG9uXG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYnRuLmNsYXNzTmFtZSk7XG4gICAgICBlbGVtZW50LmlubmVySFRNTCA9IGJ0bi5jb250ZW50O1xuXG4gICAgICAvLyBkbyBidXR0b24gYWN0aW9uIG9uIGNsaWNrXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYnRuLmFjdGlvbi5iaW5kKHRoaXMpKTtcblxuICAgICAgLy8gYXBwZW5kIGJ1dHRvbiB0byBsaXN0IGVsZW1lbnRcbiAgICAgIGJ0bi5lbGVtZW50ID0gZG9tLmZpcnN0Q2hpbGRcbiAgICAgICAgLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpXG4gICAgICAgIC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgIFxuICAgICAgLy8gdG9nZ2xlIGJ1dHRvbidzIGFjdGl2ZSBzdGF0ZVxuICAgICAgYnRuLnRvZ2dsZSA9ICgpID0+IHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCBidG4uYWN0aXZlKCkpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBhZGQgaW5wdXQgdG8gbGlzdCBlbGVtZW50XG4gICAgbGV0IGlucHV0ID0gZG9tLmZpcnN0Q2hpbGRcbiAgICAgIC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKVxuICAgICAgLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykpO1xuXG4gICAgaW5wdXQuY2xhc3NOYW1lID0gJ3BtX19jb250cm9sJztcblxuICAgIC8vIG9uIGVudGVyLCBkbyBpbnB1dCBhY3Rpb25cbiAgICB0aGlzLmlucHV0Q2FsbGJhY2sgPSBfLm5vb3A7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBldmVudCA9PiB7XG4gICAgICBpZiAoKGV2ZW50LndoaWNoIHx8IGV2ZW50LmtleUNvZGUpID09PSAxMykge1xuICAgICAgICB0aGlzLmlucHV0Q2FsbGJhY2soaW5wdXQudmFsdWUpO1xuICAgICAgICB0aGlzLnRvZ2dsZUlucHV0KGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGFmdGVyIGlucHV0IHRyYW5zaXRpb25zLCBmb2N1cyBpdFxuICAgIGlucHV0LnBhcmVudE5vZGUuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IGlucHV0LmZvY3VzKCkpO1xuICAgIFxuICAgIC8vIGFkZCBjYW5jZWwgZWxlbWVudCB0byBpbnB1dCBjb250YWluZXJcbiAgICBpbnB1dC5wYXJlbnROb2RlXG4gICAgICAuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpXG4gICAgICAuY2xhc3NOYW1lID0gJ3BtX19jYW5jZWwnO1xuXG4gICAgLy8gY2xvc2UgaW5wdXQgb24gY2FuY2VsXG4gICAgaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlSW5wdXQoZmFsc2UpO1xuICAgICAgICB0aGlzLmNhbmNlbElucHV0KCk7XG4gICAgICB9KTtcblxuICAgIHJldHVybiAodGhpcy5kb20gPSBkb20pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEVkaXRvclRvb2xiYXI7XG4iLCIvLyBjYWNoZSBzY3JvbGxiYXIgd2lkdGhcbnZhciBzY3JvbGxiYXJXaWR0aDtcblxudmFyIF8gPSB7XG4gIFxuICBzbGljZTogQXJyYXkucHJvdG90eXBlLnNsaWNlLFxuICBrZXlzOiBPYmplY3Qua2V5cyxcblxuICBpc0VsZW1lbnQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gIH0sXG5cbiAgdG9IVE1MOiBmdW5jdGlvbiAoZWxzKSB7XG4gICAgdmFyIGh0bWwsIFxuICAgICAgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIFxuICAgIGVscyA9IGVscy5sZW5ndGggPyBfLnNsaWNlLmNhbGwoZWxzKSA6IFtlbHNdO1xuICAgIFxuICAgIGZvciAobGV0IGVsIG9mIGVscykge1xuICAgICAgdGVtcC5hcHBlbmRDaGlsZChlbCk7XG4gICAgfVxuICAgIFxuICAgIGh0bWwgPSB0ZW1wLmlubmVySFRNTDtcbiAgICB0ZW1wID0gbnVsbDtcbiAgICBcbiAgICByZXR1cm4gaHRtbDtcbiAgfSxcblxuICB1bndyYXA6IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBub2RlLFxuICAgICAgcGFyZW50ID0gZWwucGFyZW50Tm9kZSxcbiAgICAgIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgXG4gICAgd2hpbGUgKChub2RlID0gZWwuZmlyc3RDaGlsZCkpIHtcbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgfVxuXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShmcmFnLCBlbCk7XG4gICAgcGFyZW50LnJlbW92ZUNoaWxkKGVsKTtcblxuICAgIHJldHVybiBmcmFnO1xuICB9LFxuXG4gIGNsb3Nlc3Q6IGZ1bmN0aW9uIChjaGlsZCwgcGFyZW50KSB7XG4gICAgdmFyIG5vZGU7XG5cbiAgICB3aGlsZSAobm9kZSA9IGNoaWxkLnBhcmVudE5vZGUpIHtcbiAgICAgIGlmIChub2RlID09PSBwYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGdldFRleHROb2RlczogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB2YXIgbm9kZXMgPSBbXTtcblxuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY2hpbGRyZW4gPSBfLnNsaWNlLmNhbGwobm9kZS5jaGlsZE5vZGVzKTtcblxuICAgICAgZm9yIChsZXQgY2hpbGQgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgbm9kZXMucHVzaC5hcHBseShub2RlcywgXy5nZXRUZXh0Tm9kZXMoY2hpbGQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZXM7XG4gIH0sXG5cbiAgc2Nyb2xsYmFyV2lkdGg6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2Nyb2xsYmFyV2lkdGgpIHsgcmV0dXJuIHNjcm9sbGJhcldpZHRoOyB9XG5cbiAgICB2YXIgd2lkdGhOb1Njcm9sbCwgd2lkdGhXaXRoU2Nyb2xsLFxuICAgICAgb3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgaW5uZXIgPSBvdXRlci5jbG9uZU5vZGUoKTtcblxuICAgIG91dGVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgIG91dGVyLnN0eWxlLndpZHRoID0gXCIxMDBweFwiO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG5cbiAgICB3aWR0aE5vU2Nyb2xsID0gb3V0ZXIub2Zmc2V0V2lkdGg7XG4gICAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSBcInNjcm9sbFwiO1xuXG4gICAgaW5uZXIuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICBvdXRlci5hcHBlbmRDaGlsZChpbm5lcik7ICAgICAgICBcblxuICAgIHdpZHRoV2l0aFNjcm9sbCA9IGlubmVyLm9mZnNldFdpZHRoO1xuXG4gICAgb3V0ZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvdXRlcik7XG5cbiAgICByZXR1cm4gKHNjcm9sbGJhcldpZHRoID0gd2lkdGhOb1Njcm9sbCAtIHdpZHRoV2l0aFNjcm9sbCk7XG4gIH0sXG5cbiAgbm9vcDogZnVuY3Rpb24gKCkge30sXG5cbiAgbm93OiBEYXRlLm5vdyxcblxuICBkZWxheTogZnVuY3Rpb24gKGZuLCB3YWl0KSB7XG4gICAgdmFyIGFyZ3MgPSBfLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfSwgd2FpdCk7XG4gIH0sXG5cbiAgZGVmZXI6IGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiBfLmRlbGF5LmFwcGx5KF8sIFtmbiwgMV0uY29uY2F0KF8uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IF87XG4iLCJpbXBvcnQgXyBmcm9tICcuL2hlbHBlcnMnO1xuXG5jbGFzcyBTZWxlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3Rvci5pbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgdGhpcy5jb25zdHJ1Y3Rvci5pbnN0YW5jZSA9IHRoaXM7XG4gIH1cblxuICBnZXQoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgfVxuXG4gIHNhdmUoKSB7XG4gICAgdmFyIHNhdmVkID0gW10sXG4gICAgICByYW5nZSA9IHRoaXMucmFuZ2U7XG5cbiAgICBzYXZlZFswXSA9IHJhbmdlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyO1xuICAgIHNhdmVkWzJdID0gdGhpcy5nZXRDYXJldE9mZnNldChzYXZlZFswXSk7XG4gICAgc2F2ZWRbMV0gPSBzYXZlZFsyXSAtIHJhbmdlLnRvU3RyaW5nKCkubGVuZ3RoO1xuXG4gICAgdGhpcy5zYXZlZCA9IHNhdmVkO1xuICB9XG5cbiAgcmVzdG9yZSgpIHtcbiAgICB0aGlzLnNlbGVjdC5hcHBseSh0aGlzLCB0aGlzLnNhdmVkKTtcbiAgfVxuXG4gIGdldFJhbmdlQm91bmRhcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMucmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIH1cblxuICBjb2xsYXBzZVRvRW5kKCkge1xuICAgIHRoaXMuZ2V0KCkuY29sbGFwc2VUb0VuZCgpO1xuICB9XG5cbiAgc2VsZWN0KG5vZGUsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgc2VsZWN0aW9uID0gdGhpcy5nZXQoKSxcbiAgICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuXG4gICAgcmFuZ2Uuc2VsZWN0Tm9kZShub2RlKTtcblxuICAgIGlmIChzdGFydCAhPT0gdW5kZWZpbmVkICYmIGVuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBsZXQgdGV4dE5vZGVzID0gXy5nZXRUZXh0Tm9kZXMobm9kZSk7XG4gICAgICBsZXQgZm91bmRTdGFydCA9IGZhbHNlO1xuICAgICAgbGV0IGNoYXJDb3VudCA9IDA7XG4gICAgICBsZXQgZW5kQ2hhckNvdW50O1xuXG4gICAgICBmb3IgKGxldCB0ZXh0Tm9kZSBvZiB0ZXh0Tm9kZXMpIHtcbiAgICAgICAgZW5kQ2hhckNvdW50ID0gY2hhckNvdW50ICsgdGV4dE5vZGUubGVuZ3RoO1xuXG4gICAgICAgIGlmICghZm91bmRTdGFydCAmJiBzdGFydCA+PSBjaGFyQ291bnQgJiZcbiAgICAgICAgICAgIChzdGFydCA8IGVuZENoYXJDb3VudCB8fCBzdGFydCA9PT0gZW5kQ2hhckNvdW50KSkge1xuICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KHRleHROb2RlLCBzdGFydCAtIGNoYXJDb3VudCk7XG4gICAgICAgICAgZm91bmRTdGFydCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm91bmRTdGFydCAmJiBlbmQgPD0gZW5kQ2hhckNvdW50KSB7XG4gICAgICAgICAgcmFuZ2Uuc2V0RW5kKHRleHROb2RlLCBlbmQgLSBjaGFyQ291bnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hhckNvdW50ID0gZW5kQ2hhckNvdW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICB9XG5cbiAgcmVwbGFjZShjb250ZW50KSB7XG4gICAgdmFyIG5vZGUsIGxhc3ROb2RlLFxuICAgICAgc2VsZWN0aW9uID0gdGhpcy5nZXQoKSxcbiAgICAgIHJhbmdlID0gdGhpcy5yYW5nZSxcbiAgICAgIGV4cGFuZGVkUmFuZ2UgPSByYW5nZS5jbG9uZVJhbmdlKCksXG4gICAgICB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgdGVtcC5pbm5lckhUTUwgPSBjb250ZW50O1xuXG4gICAgd2hpbGUgKChub2RlID0gdGVtcC5maXJzdENoaWxkKSkge1xuICAgICAgbGFzdE5vZGUgPSBmcmFnLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgIH1cblxuICAgIHJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgcmFuZ2UuaW5zZXJ0Tm9kZShmcmFnKTtcblxuICAgIGlmIChsYXN0Tm9kZSkge1xuICAgICAgZXhwYW5kZWRSYW5nZS5zZXRFbmRBZnRlcihsYXN0Tm9kZSk7XG4gICAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UoZXhwYW5kZWRSYW5nZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FyZXRPZmZzZXQobm9kZSkge1xuICAgIHZhciByYW5nZSA9IHRoaXMucmFuZ2U7XG5cbiAgICB2YXIgcHJlQ2FyZXRSYW5nZSA9IHJhbmdlLmNsb25lUmFuZ2UoKTtcbiAgICBwcmVDYXJldFJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhub2RlKTtcbiAgICBwcmVDYXJldFJhbmdlLnNldEVuZChyYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7XG5cbiAgICByZXR1cm4gcHJlQ2FyZXRSYW5nZS50b1N0cmluZygpLmxlbmd0aDtcbiAgfVxuXG4gIGNvbnRhaW5zKHRhZ05hbWUpIHtcbiAgICB2YXIgdGFnUmVnID0gbmV3IFJlZ0V4cCgnPCcgKyB0YWdOYW1lICsgJyguKj8pPnw8LycgKyB0YWdOYW1lICsgJz4nKTtcbiAgICByZXR1cm4gdGFnUmVnLnRlc3QodGhpcy5odG1sKTtcbiAgfVxuXG4gIGlzV2l0aGluKHRhZ05hbWUsIGxpbWl0Tm9kZSkge1xuICAgIHZhciByZXQgPSBbXSwgXG4gICAgICByYW5nZSA9IHRoaXMucmFuZ2UsXG4gICAgICBzdGFydFBhcmVudCA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyLnBhcmVudE5vZGUsXG4gICAgICBlbmRQYXJlbnQgPSByYW5nZS5lbmRDb250YWluZXIucGFyZW50Tm9kZSxcbiAgICAgIG5vZGUgPSByYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtcblxuICAgIC8vIGNvcnJlY3QgYHRhZ05hbWVgXG4gICAgdGFnTmFtZSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTtcblxuICAgIC8vIGBzdGFydFBhcmVudGAgaGFzIGB0YWdOYW1lYFxuICAgIGlmIChzdGFydFBhcmVudC50YWdOYW1lID09PSB0YWdOYW1lKSB7XG4gICAgICByZXQucHVzaChzdGFydFBhcmVudCk7XG4gICAgfVxuXG4gICAgLy8gYGVuZFBhcmVudGAgaXNuJ3QgYHN0YXJ0UGFyZW50YCBhbmQgaXQgaGFzIGB0YWdOYW1lYFxuICAgIGlmIChlbmRQYXJlbnQgIT09IHN0YXJ0UGFyZW50ICYmIGVuZFBhcmVudC50YWdOYW1lID09PSB0YWdOYW1lKSB7XG4gICAgICByZXQucHVzaChlbmRQYXJlbnQpO1xuICAgIH1cblxuICAgIC8vIGlmIGBzdGFydFBhcmVudGAgb3IgYGVuZFBhcmVudGAgbWF0Y2gsIHdlJ3JlIGRvbmVcbiAgICBpZiAocmV0Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgLy8gbGltaXQgdG8gYm9keVxuICAgIGxpbWl0Tm9kZSA9IHVuZGVmaW5lZCA9PT0gbGltaXROb2RlID8gZG9jdW1lbnQuYm9keSA6IGxpbWl0Tm9kZTtcblxuICAgIC8vIGNoZWNrIGVhY2ggYW5jZXN0b3JcbiAgICB3aGlsZSAobm9kZSAmJiBub2RlICE9PSBsaW1pdE5vZGUpIHtcblxuICAgICAgLy8gaWYgdGhlcmUncyBhIG1hdGNoLCByZXR1cm4gd2l0aCBpdFxuICAgICAgaWYgKG5vZGUudGFnTmFtZSAmJiBub2RlLnRhZ05hbWUgPT09IHRhZ05hbWUpIHtcbiAgICAgICAgcmV0LnB1c2gobm9kZSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9XG5cbiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGVcbiAgICB9XG5cbiAgICAvLyBubyBtYXRjaGVzXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZ2V0IGh0bWwoKSB7XG4gICAgcmV0dXJuIF8udG9IVE1MKHRoaXMucmFuZ2UuY2xvbmVDb250ZW50cygpKTtcbiAgfVxuXG4gIGdldCBpc0NvbGxhcHNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoKS5pc0NvbGxhcHNlZDtcbiAgfVxuXG4gIGdldCByYW5nZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoKS5nZXRSYW5nZUF0KDApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlbGVjdGlvbjtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==